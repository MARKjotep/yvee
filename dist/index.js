var Di=Object.defineProperty;var Pi=(o,i)=>{for(var n in i)Di(o,n,{get:i[n],enumerable:!0,configurable:!0,set:(r)=>i[n]=()=>r})};var A=function(o,i,n,r){var f=arguments.length,t=f<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,n):r,u;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")t=Reflect.decorate(o,i,n,r);else for(var x=o.length-1;x>=0;x--)if(u=o[x])t=(f<3?u(t):f>3?u(i,n,t):u(i,n))||t;return f>3&&t&&Object.defineProperty(i,n,t),t};var $=(o,i)=>{if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(o,i)};var Qo={};Pi(Qo,{isWindow:()=>v,isUndefined:()=>Oi,isStr:()=>V,isPromise:()=>Si,isPlainObject:()=>I,isObject:()=>Ci,isObj:()=>J,isNumber:()=>l,isNum:()=>qo,isNull:()=>$o,isNotWindow:()=>L,isNotNull:()=>_i,isModule:()=>Jo,isInt:()=>Ro,isFN:()=>Z,isDefined:()=>Ni,isClassOrId:()=>wi,isBool:()=>k,isAsync:()=>Vi,isArraybuff:()=>ji,isArr:()=>b});var Z=(o)=>typeof o==="function",Vi=(o)=>o.constructor.name==="AsyncFunction",Si=(o)=>!!o&&typeof o.then==="function",l=(o)=>{return!isNaN(parseFloat(o))&&isFinite(o)},Ci=(o)=>{return o&&typeof o==="object"&&!Array.isArray(o)},I=(o)=>{return typeof o==="object"&&o!==null&&Object.getPrototypeOf(o)===Object.prototype&&!Array.isArray(o)},Jo=(o)=>{return o&&typeof o==="object"&&o[Symbol.toStringTag]==="Module"},ji=(o)=>{return o instanceof Uint8Array||o instanceof ArrayBuffer||typeof o==="string"},wi=(o)=>{return o.startsWith(".")||o.startsWith("#")},k=(o)=>typeof o==="boolean",V=(o)=>typeof o==="string",b=(o)=>Array.isArray(o),J=(o)=>typeof o==="object",qo=(o)=>typeof o==="number",$o=(o)=>o===null,_i=(o)=>o===null,Oi=(o)=>typeof o>"u",Ni=(o)=>typeof o<"u",Ro=(o)=>{return Number.isInteger(Number(o))},v=typeof window<"u",L=typeof window>"u";function oi(o,i){y(i).forEach(([n,r])=>{ni(o,n,{value:r,writable:!1,configurable:!1,enumerable:!0})})}var d=(o)=>{return b(o)?o:[o]};function Mo(o=3){let r=((Error().stack?.split(`
`)??[])[o]||"").match(/at\s+([^(]+)\s*\(/);return(r?r[1].split(".").pop()?.trim():"?")??"?"}class ii{name;constructor(o){this.name=o}log=(...o)=>{let i=Mo(3);console.log(`[${this.name}.${i}]`,...o)};set i(o){let i=Mo(3);console.log(`[${this.name}.${i}]`,...d(o))}}class j{static logger=(o)=>{return new ii(V(o)?o:o.constructor.name)};static set f(o){let i=Mo();console.log(`[${i}]`,...d(o))}static set i(o){console.info(...d(o))}static set e(o){console.error(...d(o))}static set w(o){console.warn(...d(o))}}class X{_c=0;_id="";constructor(o){if(this._c=0,this._id=o??K(5),o?.includes("-")){let[i,n="0"]=[o.split("-").slice(0,-1).join("-"),o.split("-").slice(-1)[0]];this._id=i,this._c=l(n)?parseInt(n):0}}get id(){return this._id+"-"+this._c}get mid(){return this._id+"-"+ ++this._c}}var si=(o)=>Array.from({length:o},(i,n)=>n),ri="ABCDEFGHIJKLMNOPQRSTUVWXYZ",fi="abcdefghijklmnopqrstuvwxyz";var q=(o)=>JSON.stringify(o),ti=(o)=>{return JSON.parse(o)};var E=(o)=>{if(o.startsWith("webkit"))o="-"+o;return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},K=(o)=>{let i=ri+fi,n=si(10).join("");return Array.from({length:o},(r,f)=>i+(f?n:"")).reduce((r,f)=>{return r+=f.charAt(Math.floor(Math.random()*f.length))},"")},pi=(o=6,i)=>{if(!i)return Math.floor(Math.random()*o);return Math.round(Math.random()*(i-o)+o)},ui=()=>{let o=[...ri,...fi],i=pi(0,o.length);return o[i]};class g extends Map{obj(o){o&&y(o).forEach(([i,n])=>this.set(i,n))}map(o){o.forEach((i,n)=>{if(i instanceof g)this.set(n,i);else if(b(i)){if(this.lacks(n))this.set(n,[]);this.get(n).push(...i)}else if(J(i))this.ass(n,i);else this.set(n,i)})}ass(o,i){if(!this.has(o))this.set(o,{});T(this.get(o),i)}lacks(o){return!this.has(o)}init(o,i){return this.has(o)?this.get(o):this.set(o,i).get(o)}}var{values:R,keys:w,entries:y}=Object;var{defineProperty:ni,assign:T}=Object,xi=(o,i)=>Object.hasOwn(o,i),D=(o)=>{return Object.keys(o).length},To=(o,i)=>{if(!i.has(o))i.set(o,new g);return i.get(o)},a=(o,i)=>{if(!i.has(o))i.set(o,[]);return i.get(o)},e=(o,i)=>{let n={added:{},removed:{},modified:{}},r=w(o),f=w(i);for(let t of f){let u=o[t],x=i[t];if(!(t in o))n.added[t]=x;else if(b(u)&&b(x)){if(q(u)!==q(x))n.modified[t]={old:u,new:x}}else if(J(u)&&J(x)&&!$o(u)&&!$o(x)){let m=e(u,x);if(D(m.added)||D(m.removed)||D(m.modified))n.modified[t]={old:u,new:x}}else if(u!==x)n.modified[t]={old:u,new:x}}for(let t of r)if(!(t in i))n.removed[t]=o[t];return n};function mi(o,i){if(o.size!==i.size)return!0;for(let n of o)if(!i.has(n))return!0;return!1}var bo=(o)=>{return R(o).some((i)=>{return D(i)})};var S=(o,i)=>{return{name:o,content:i}},ci=(o,i)=>{return{property:o,content:i}},li=(o,i)=>{return{"http-equiv":o,content:i}};class oo{metas=[];constructor(o){o&&this.metas.push(S("description",o))}author(o){return this.meta=S("author",o),this}charset(o){return this.meta={charset:o},this}keywords(...o){return this.meta=S("keywords",o.join(", ")),this}viewport(o){let i=y(o).map(([n,r])=>[E(n),String(r)].join("="));return this.meta=S("viewport",i.join(", ")),this}httpEquiv(o){return y(o).forEach(([i,n])=>{this.meta=li(E(i),String(n))}),this}robots(...o){return this.meta=S("robots",o.join(", ")),this}themeColor(o){return this.meta=S("theme-color",o),this}openGraph(o){return y(o).forEach(([i,n])=>{this.meta=ci("og:"+i,String(n))}),this}twitter(o){return y(o).forEach(([i,n])=>{this.meta=S("twitter:"+i,String(n))}),this}push(o){this.metas.unshift(...o)}set meta(o){this.metas.push(o)}}var ki=(o)=>{if(L)return;return o()};var U=(o,i,n)=>{let r=n.value;return{configurable:!0,get(){if(this===o.constructor.prototype)return r;let f=r.bind(this);return Object.defineProperty(this,i,{value:f,configurable:!0,writable:!0}),f}}};class Wo{}var vi=["charset","name","property","http-equiv"],$i=(o,i,n=!1,r={})=>{i.forEach((f)=>{for(let t of vi)if(t in f){let u=f[t];if(n)T(f,{x:!0});else if(!("x"in f))T(f,r);o[`${t}_${t==="charset"?"":u}`]=f}})},di=(o,i,n=!1,r={})=>{i.forEach((f)=>{if("href"in f){let t=f.href;if(n)T(f,{x:!0});else if(!("x"in f))T(f,r);o[`${t}`]=f}})};class Ti{_head;idm;mark;push;constructor({initial:o,mark:i,push:n}={}){this._head=new g(o),this.mark=i||!1,this.push=n||{}}set head(o){y(o).forEach(([i,n])=>{if(i==="title"||i==="base"){if(n!==void 0){if(i=="base"){if(this.mark)T(n[0]||{},{x:!0})}this._head.set(i,n)}return}if(n instanceof oo)return $i(this._head.init("meta",{}),n.metas,this.mark,this.push);if(!b(n))return;switch(i){case"meta":return $i(this._head.init("meta",{}),n,this.mark,this.push);case"link":return di(this._head.init("link",{}),n,this.mark,this.push);case"script":if(n.length){this._head.init(i,[]);let r=n.map((f)=>{if(!f.yid&&this.idm)f.yid="sc"+this.idm.mid;if(this.mark)T(f,{x:!0});else if(!("x"in f))T(f,this.push);return f});this._head.get(i).push(...r)}return}})}get head(){return this._head}set id(o){this.idm=new X(o)}}var Eo=(o)=>{return y(o??{}).reduce((i,[n,r])=>{return i.push(k(r)&&r?n:`${n}="${r}"`),i},[""]).join(" ")},bi=(o)=>{let i=new Set;if(!o)return"";let n=[...o].reduce((r,[f,t])=>{if(f==="meta"||f==="link")t=R(t);if(V(t)){if(f==="title")i.add(`<${f}>${t}</${f}>`);else r.add(`<${f}>${t}</${f}>`);return r}if(!b(t))return r;if(f==="base"){let x=t.slice(-1);if(x)return i.add(`<${f}${Eo(x[0])}>`),r}return t.map((x)=>{if(f==="script"){let m={...x},H="";if("importmap"in m)m.type="importmap",H=JSON.stringify(m.importmap),delete m.importmap;else if("body"in m)H=m.body,delete m.body;return`<${f}${Eo(m)}>${H}</${f}>`}return`<${f}${Eo(x)}>`}).forEach((x)=>{if(x.includes('type="module"'))i.add(x);else if(x.includes("<meta"))i.add(x);else r.add(x)}),r},new Set);return[...i,...n].join("")};class io{lang="en";htmlHead;head;constructor({mark:o,push:i}={}){this.htmlHead=new g,this.head=(n={})=>{let r=new Ti({initial:this.htmlHead,mark:o,push:i}),{link:f,script:t,meta:u,title:x,description:m,css:H,js:Y}=n;if(m)r.head={meta:[{name:"description",content:m}]};if(ai(r,{css:H,js:Y}),"base"in n)r.head={base:n.base};r.head={script:t,title:x,meta:u,link:f},this.htmlHead=r.head}}}var ai=(o,i)=>{let{css:n,js:r}=i;if(n){let t=(b(n)?n:[n]).map((u)=>({rel:"preload stylesheet",href:u,as:"style"}));o.head={link:[...t]}}if(r){let t=(b(r)?r:[r]).map((u)=>({src:u}));o.head={script:[...t]}}};var Fo=async(o)=>{if(L)return;return new Promise((i,n)=>{let r=document.createElement("link");if(o.rel!=="stylesheet")o.rel="stylesheet",o.as="style";y(o).forEach(([f,t])=>{r.setAttribute(f,t)}),r.onload=()=>i(r),r.onerror=()=>n(Error("Failed to load CSS")),document.head.appendChild(r)})};var gi=(o)=>{if(L)return;return new Promise((i,n)=>{let r=document.createElement("script"),f="";if("importmap"in o)o.type="importmap",f=JSON.stringify(o.importmap),delete o.importmap;else if("body"in o)f=o.body,delete o.body;if(f)r.textContent=f;y(o).forEach(([t,u])=>{r.setAttribute(t,u)}),r.onload=()=>i(r),r.onerror=()=>n(Error("Failed to load Script")),document.head.appendChild(r),requestAnimationFrame(()=>i("Script executed"))})},ei=()=>{let i=document.querySelector("#d-css")?.sheet;if(i)return i;let n=document.createElement("style");return n.id="d-css",document.head.appendChild(n),n.sheet},on=(o,i)=>{for(let n=0;n<o.cssRules.length;n++)if(o.cssRules[n].selectorText===i)return!0;return!1},nn=(o)=>Object.entries(o).map(([i,n])=>`${E(i)}: ${n};`).join(" ");function rn(o,i={}){if(L)return;let n=ei();if(!n)return;if(!on(n,o))n.insertRule(`${o} { ${nn(i)} }`,n.cssRules.length)}var yi=(o,i=!1)=>{if(l(o))return[+o,Ro(o)?"int":"float"];if(i&&/\.\w+$/.test(o))return[o,"file"];if(o==="/")return[o,"-"];if(o.length===36&&o.match(/\-/g)?.length===4)return[o,"uuid"];return[o,"string"]},go=(o)=>{let i=o.startsWith("/")?o:"/"+o,n=i.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],[r,f]=n.reduce(([t,u],x)=>{if(x.includes("<")){let m=x.match(/(?<=<)[^/].*?(?=>|$)/g);if(m?.length){let[H,Y]=m[0].split(":");if(H)t.push(H),u.push(Y||"_")}}else t.push(x===">"?"/":x);return[t,u]},[[],[]]);if(i.endsWith("/")&&i.length>1)r.push("/");return{parsed:r,args:f}};class yo{storage;constructor(){this.storage=new g}cache(o,i){if(this.storage.lacks(o))this.storage.set(o,i());return this.storage.get(o)}}var fn=["int","float","file","uuid","string"];class _{_storage;CC;constructor(){this._storage=new g,this.CC=new yo}set(o){let{parsed:i,path:n}=o,r=q(i);if(!this._storage.get(r))this._storage.set(r,o);else throw`path: ${n} already used.`}get(o){let{parsed:i}=this.CC.cache(o,()=>go(o)),n={},r=this._storage.get(q(i));if(!r&&o!=="/")for(let f of this._storage.keys()){let t=[],u=ti(f);if(i.length===u.length){let x=u.map((Y,z)=>{let G=yi(i[z],i.length-1===z);if(Y===G[0])return G[0];if(fn.includes(G[1]))return t.push(G[0]),G[1];return Y}),m=q(x);if(this._storage.has(m)){r=this._storage.get(m),r?.args.forEach((Y,z)=>{n[Y]=t[z]});break}}}return[r,n]}keys(){return this._storage.keys()}}class Ho{path="";parsed=[];args=[];constructor(o){oi(this,{path:o,...go(o)})}}var P=(o,i=2)=>String(o).padStart(i,"0"),Hi=new Map;function O(o,i){let n=JSON.stringify({locale:i,...o}),r=Hi.get(n);if(!r)r=new Intl.DateTimeFormat(i,o),Hi.set(n,r);return r}var zo={YYYY:(o)=>String(o.getFullYear()),YY:(o)=>P(o.getFullYear()%100),MMMM:(o,i)=>O({month:"long"},i).format(o),MMM:(o,i)=>O({month:"short"},i).format(o),MM:(o)=>P(o.getMonth()+1),M:(o)=>String(o.getMonth()+1),dddd:(o,i)=>O({weekday:"long"},i).format(o),ddd:(o,i)=>O({weekday:"short"},i).format(o),DD:(o)=>P(o.getDate()),D:(o)=>String(o.getDate()),HH:(o)=>P(o.getHours()),H:(o)=>String(o.getHours()),hh:(o)=>{let i=o.getHours()%12||12;return P(i)},h:(o)=>String(o.getHours()%12||12),A:(o,i)=>{return(O({hour:"numeric",hour12:!0},i).formatToParts(o).find((f)=>f.type==="dayPeriod")?.value??(o.getHours()<12?"AM":"PM")).toUpperCase()},a:(o,i)=>{return(O({hour:"numeric",hour12:!0},i).formatToParts(o).find((f)=>f.type==="dayPeriod")?.value??(o.getHours()<12?"AM":"PM")).toLowerCase()},mm:(o)=>P(o.getMinutes()),m:(o)=>String(o.getMinutes()),ss:(o)=>P(o.getSeconds()),s:(o)=>String(o.getSeconds()),SSS:(o)=>P(o.getMilliseconds(),3),Q:(o)=>String(Math.floor(o.getMonth()/3)+1),DoY:(o)=>{let i=new Date(o.getFullYear(),0,1),n=Math.floor((+o-+i)/86400000)+1;return String(n)}};function tn(){if(globalThis.__dateTokenRegex)return globalThis.__dateTokenRegex;let o=new RegExp(Object.keys(zo).sort((i,n)=>n.length-i.length).map((i)=>i.replace(/([.*+?^${}()|[\]\\])/g,"\\$1")).join("|"),"g");return globalThis.__dateTokenRegex=o,o}function Yi(o,i="YYYY-MM-DD HH:mm:ss",n){let r=typeof o==="number"?new Date(o):typeof o==="string"?new Date(o):o,f=tn(),t=new Map;return i.replace(f,(u)=>{if(t.has(u))return t.get(u);let x=zo[u],m=x?x(r,n):u;return t.set(u,m),m})}Date.prototype.format=function(o,i){return Yi(this,o,i)};Date.registerFormat=function(o,i){zo[o]=i,globalThis.__dateTokenRegex=null};Date.format=function(o,i){return new Date().format(o,i)};class Yo{date;constructor(o){this.date=o?new Date(o):new Date}timed(o,i=1){let n=[["year","FullYear"],["month","Month"],["day","Date"],["hour","Hours"],["minute","Minutes"],["second","Seconds"],["millisecond","Milliseconds"]],r=this.date;if(o.quarter)r.setMonth(r.getMonth()+3*o.quarter);if(o.week)r.setDate(r.getDate()+7*o.week);for(let[f,t]of n){let u=o[f];if(u!==void 0&&u!==0)r[`set${t}`](r[`get${t}`]()+u)}if(o.startOfMonth)r.setDate(1),r.setHours(0,0,0,0);if(o.endOfMonth)r.setMonth(r.getMonth()+1,0),r.setHours(23,59,59,999);if(o.week!==void 0&&i!==void 0){let t=(r.getDay()-i+7)%7;r.setDate(r.getDate()-t)}return r}static timed(o,i=1){return new Yo().timed(o,i)}static local(o){return new Date(o).toLocaleString()}local(){return this.date.toLocaleDateString()}format(o="YYYY-MM-DD HH:mm:ss",i){return Yi(this.date,o,i)}static format(o="YYYY-MM-DD HH:mm:ss",i){let n=new Date,r=typeof n==="number"?new Date(n):typeof n==="string"?new Date(n):n,f=(c,Ki=2)=>String(c).padStart(Ki,"0"),t=r.getHours(),u=t%12||12,x=new Intl.DateTimeFormat(i,{month:"long"}).format(r),m=new Intl.DateTimeFormat(i,{month:"short"}).format(r),H=new Intl.DateTimeFormat(i,{weekday:"long"}).format(r),Y=new Intl.DateTimeFormat(i,{weekday:"short"}).format(r),G=new Intl.DateTimeFormat(i,{hour:"numeric",hour12:!0}).formatToParts(r).find((c)=>c.type==="dayPeriod")?.value||(t<12?"AM":"PM"),Ii={YYYY:String(r.getFullYear()),YY:f(r.getFullYear()%100),MMMM:x,MMM:m,MM:f(r.getMonth()+1),M:String(r.getMonth()+1),dddd:H,ddd:Y,DD:f(r.getDate()),D:String(r.getDate()),HH:f(t),H:String(t),hh:f(u),h:String(u),A:G.toUpperCase(),a:G.toLowerCase(),mm:f(r.getMinutes()),m:String(r.getMinutes()),ss:f(r.getSeconds()),s:String(r.getSeconds()),SSS:f(r.getMilliseconds(),3),Q:String(Math.floor(r.getMonth()/3)+1)};return o.replace(/YYYY|YY|MMMM|MMM|MM|M|dddd|ddd|DD|D|HH|H|hh|h|A|a|mm|m|ss|s|SSS|Q/g,(c)=>Ii[c])}static get now(){return Date.now()}random(o=new Date){let i=this.date.getTime(),n=o.getTime(),r=i+Math.random()*(n-i);return new Date(r)}static random(o,i=new Date){let n=o.getTime(),r=i.getTime(),f=n+Math.random()*(r-n);return new Date(f)}delta(o){let i=this.date;if(o.year)i.setFullYear(i.getFullYear()+o.year);if(o.month)i.setMonth(i.getMonth()+o.month);if(o.day)i.setDate(i.getDate()+o.day);if(o.hour)i.setHours(i.getHours()+o.hour);if(o.minute)i.setMinutes(i.getMinutes()+o.minute);if(o.second)i.setSeconds(i.getSeconds()+o.second);return i}static delta(o){return new Yo().delta(o)}}class Io{static rand(o=6,i){if(i)return Math.floor(Math.random()*(i-o+1)+o);return Math.floor(Math.random()*o)+1-1}static fill(o,i=null){return Array(o).fill(i)}static new({dom:o,id:i,inner:n}){let r=document.createElement(o);if(i)r.id=i;if(n)r.innerHTML=n;return r}static randFrom(o){if(Array.isArray(o)){let i=o.length,n=this.rand(0,i-1);return o[n]}else if(typeof o=="object"){let i=w(o),n=i.length,r=this.rand(0,n-1);return i[r]}}static randArray(o=[],i=1,n=!1){let r=[],f=n?new Set:null;while((n?f.size:r.length)<i){let t=o[Io.rand(0,o.length-1)];n?f.add(t):r.push(t)}return n?[...f]:r}static randomAZ=ui;static makeID=K;static class(o,...i){let n=i.filter(Boolean);if(o?.class)n.push(...b(o.class)?o.class:[o.class]);if(n.length)o.class=n}static get O(){return{vals:R,keys:w,items:y,has:xi,ass:T,len:(o={})=>w(o).length}}static get is(){return Qo}static get return(){return hi}static isHREF(o,i){return o===i?!0:o.startsWith(i)&&i!=="/"?!0:!1}static sleep=(o=1000)=>new Promise((i)=>setTimeout(i,o));static get screen(){let{innerWidth:o}=window,i={xs:o<=480,sm:o>=480,smd:o>=624,md:o>=768,lg:o>=1024,xl:o>=1280,xxl:o>=1536},n=y(i).reverse();for(let r=0;r<n.length;r++){let[f,t]=n[r];if(t)return f}return}bytes(o){if(o===0)return"0 Bytes";let i=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(o)/Math.log(i));return parseFloat((o/Math.pow(i,r)).toFixed(2))+" "+n[r]}static format(o){return new Bi(o)}static compareObjects=e;static isObjectUdpated=bo}class hi{static arr(o){return o?b(o)?o:[o]:[]}static num(o,i=0){let n=parseFloat(o);return isNaN(n)?i:n}static str(o){return String(o)}static arr2obj(o,i=!1){return o.reduce((n,r,f)=>{if(i)n[r]=f;else n[f]=r;return n},{})}}class Bi{val;constructor(o){this.val=o}get px(){return`${this.val}px`}get rem(){return`${this.val}rem`}get pr(){return`${this.val}%`}}async function N(o,i,{id:n="stateHook",init:r}={}){let f=[],t=()=>i.map((x)=>x.value),u=async()=>{await o(...t())};if(i.forEach((x)=>{f.push(x.hook(u)(n))}),r)await u();return()=>{f.forEach((x)=>x())}}var Zi=(o)=>{o.forEach((i)=>i())};var un=(o,i)=>{for(let[n,r]of o){let f=s(n);if(!f){o.delete(n);continue}r.forEach((t)=>{t.call(f,i)})}};class W extends EventTarget{options;deep;verify;hooks=new g;states=new g;_value;listening=!1;end;constructor(o,i={},n=!0,r=!0){super();this.options=i;this.deep=n;this.verify=r;this._value=o}get value(){return this._value}set value(o){if(!this.verify){this._value=o,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(!this.deep){if(this._value===o)return;this._value=o,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(I(this._value)||b(this._value)){let i=e(this._value,o);if(!bo(i))return}else if(this._value instanceof Set){if(!mi(this._value,o))return}else if(this._value===o)return;this._value=o,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}))}get listen(){let o=(i)=>{if(Zi(this.hooks),un(this.states,i.detail),!this.states.size&&!this.hooks.size)this.end?.()};if(!this.listening)this.addEventListener("updated",o,this.options),this.listening=!0;return()=>{this.listening&&this.removeEventListener("updated",o,this.options),this.end=void 0,this.listening=!1}}call(o,i){return(n)=>{if(To(n,this.states).set(i,o),!L&&!this.listening)this.end=this.listen;return()=>{if(this.states.has(n))this.states.get(n)?.delete(i)}}}hook(o){return(i)=>{if(this.hooks.set(i,o),!L&&!this.listening)this.end=this.listen;return()=>{if(this.hooks.has(i))this.hooks.delete(i)}}}}function Q(o,i={}){return new W(o,i,!0)}function xn(o,i=!1){return new W(o,{},!1,i)}class Ko{e;opt;constructor(o){this.e=o;this.opt={duration:500,easing:"ease-in-out",fill:"forwards"}}animate(o,i={}){return this.e.animate(o,i)}get slide(){let o=({x:i=0,y:n=0},r={})=>{T(this.opt,r);let f=[[i,n],[0,0]].map(([t,u])=>({transform:`translateX(${t}rem) translateY(${u}rem)`}));return this.e.animate(f,this.opt),this};return{left:(i={})=>{return o({x:-2},i)},right:(i={})=>{return o({x:2},i)},up:(i={})=>{return o({y:2},i)},down:(i={})=>{return o({y:-2},i)}}}fade(o={}){T(this.opt,o);let i=[0,1].map((n)=>({opacity:n}));return this.e.animate(i,this.opt),this}shake(o="Y",i={}){T(this.opt,i);let n=[0,5,-5,5,0].map((r)=>({transform:`translate${o}(${r}px)`}));return this.e.animate(n,this.opt),this}color(o=[],i={}){T(this.opt,i);let n=Array.isArray(o)?o.map((r)=>({color:r})):{color:o};return this.e.animate(n,this.opt),this}bg(o=[],i={}){T(this.opt,i);let n=Array.isArray(o)?o.map((r)=>({backgroundColor:r})):{backgroundColor:o};return this.e.animate(n,this.opt),this}bounce(o=1,i={}){T(this.opt,i);let n=[0.5,o,1].map((r)=>({transform:`scale(${r})`}));return this.e.animate(n),this}}var no=(o)=>{if(b(o))return o.filter((i)=>i!==void 0).join(" ");else if(J(o)){if(I(o))return q(o)}else if(Z(o))return no(o());else if(o!==void 0&&o!==null)return k(o)?o?"":"false":String(o);return""};function mn(o,i){switch(i??o){case"style":return function(n){this.style.setProperty(o,n)};default:return function(n){this.setAttribute(o,n)}}}class Do{attr;constructor(o={}){this.attr=o}get(o,i=this.attr,n){let r=(f,t)=>{if(b(t))o.attr_push(f,no(t),n);else if(t instanceof W){let u=n?`${n}_${f}`:f;o.states.push(t.call(mn(f,n),u)),r(f,t.value)}else if(J(t)){if(I(t)&&!n)this.get(o,t,f)}else o.attr_push(f,no(t),n)};y(i).forEach(([f,t])=>{if(f==="ref"){if(t instanceof ro)o.events.obj({element(){t.element=this}})}else if(["on"].includes(f))J(i.on)&&o.events.obj(i.on);else{if(t===void 0)return;r(f,t)}})}unload(o){let i=void 0;if(o in this.attr)i=this.attr[o],delete this.attr[o];return i}}var $n=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Tn=(o)=>$n.includes(o);function bn(o){return String(o).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var ho=async(o,i)=>{if(o=await Promise.resolve(o),b(o)){let n=[];for(let r of o)n.push(await ho(r,i));return n.join("")}else if(o instanceof C){let{ctx:n,oz:r}=await Zo(o,i.IDM);return i.OZ.push(r),n}else if(J(o)){if(o instanceof Set)return[...o].join(" ");return q(o)}else if(Z(o))return await ho(o(),i);else if(o!==void 0&&o!==null)return bn(o);return""},Bo=async(o,i)=>{let n=new X(i),r=new fo(n.id,n);return{ctx:await ho(o,r),catt:r}};async function gn(o){let i=this.id;if(i){let{ctx:n,catt:r}=await Bo(o,i);if(this.innerHTML!==n)this.innerHTML=n,F.RPS(r.OZ)}}var Po=async(o,i,n,r=[])=>{if(b(o))for(let f of o)await Po(f,o.length,n,r);else if(o instanceof W)if(i>1)await Po(await h("div",{},o),i,n,r);else{let f=o.value,t=f instanceof C?"dom":"ctx",{ctx:u,catt:x}=await Bo(f,n.xid+"-0");n.xid=x.xid,r.push(u),n.OZ.push(x.OZ),n.states.push(o.call(gn,t))}else r.push(await ho(o,n))};class Vo{tag;ctx;closing;constructor(o="",i){this.tag=o;this.ctx=i;let n=Tn(o);this.closing=n?"":`</${o}>`}async process(o,i=this.ctx,n=[]){for(let r of i)await Po(await Promise.resolve(r),i.length,o,n);return n.join("")}async get(o){let i=await this.process(o);if(!this.tag)return i;if(o.events.size||o.states.length)o.id=o.xid;return`<${this.tag}${o.attr}>${i}${this.closing}`}}class jo{e;_query;_parent;constructor(o,i){this.e=o;this._query=i}get a(){return new Ko(this)}get all(){if(this._query){let o=document.querySelectorAll(this._query);if(o.length)return Array.from(o).map((i)=>i)}return[]}get attr(){let o=this.e;return{has:(i)=>{return o.hasAttribute(i)},get:(i)=>{return o.getAttribute(i)},del:(i)=>{return o.removeAttribute(i),this},set:(i)=>{for(let n in i){let r=i[n];if(i[n]!==void 0)o.setAttribute(n,no(r))}return this}}}get children(){return Array.from(this.e.children).map((o)=>B(o))}get click(){return this.e.click(),this}get delete(){return this.e.remove(),this}get disabled(){return this.e.disabled??!1}get focus(){return this.e.focus(),this}get href(){return this.e?.href??""}get id(){return this.e.id}get inner(){return this.e.innerHTML}get offsetParent(){let o=this.e.offsetParent;if(o)return new M(o);return}get parent(){let o=this.e.parentElement;if(o)return new M(o);return}get hash(){return this.e?.hash??""}get path(){return this.e?.pathname??""}get rect(){return this.e.getBoundingClientRect()}get remove_element(){return this.e.remove(),this}get style(){let o=this.e.style,i=this;return{set:(n,r=0)=>{let f=o,t=()=>{y(n).forEach(([u,x])=>{if(u in f){if(f[u]!==x)f[u]=x}else if(x!==null)o.setProperty(u,String(x))})};if(Z(r))i.on("transitionend",r);if(qo(r))setTimeout(t,r);else t();return i},get:(n)=>{let r=E(String(n));return o.getPropertyValue(r)},del:(...n)=>{return n.forEach((r)=>{let f=E(String(r));o.removeProperty(f)}),i}}}get submit(){let o=this.e;if("submit"in o)return o.submit();return!1}get tag(){return this.e.tagName.toLowerCase()}get value(){return this.e.value??""}get unload(){return()=>{this.e.remove()}}set append(o){So(o,Co(this.id)).then((i)=>{let{ctx:n,catt:r}=i;this.e.insertAdjacentHTML("beforeend",n),F.RPS(r.OZ)})}set appendfirst(o){So(o,Co(this.id)).then((i)=>{let{ctx:n,catt:r}=i;this.e.insertAdjacentHTML("afterbegin",n),F.RPS(r.OZ)})}set inner(o){So(o,Co(this.id)).then((i)=>{let{ctx:n,catt:r}=i;this.e.innerHTML=n,F.RPS(r.OZ)})}set disabled(o){let i=this.e;if("disabled"in i)i.disabled=o}set id(o){this.e.id=o}set value(o){let i=this.e;i.value=o}}var So=(o,i)=>{return Bo(o,i)},Co=(o)=>o?`${o}-0`:o;class M extends jo{add(...o){return this.e.classList.add(...o.map((i)=>i.replace(/[^\w-]/,""))),()=>{this.e.classList.remove(...o.map((i)=>i.replace(/[^\w-]/,"")))}}remove(...o){return this.e.classList.remove(...o.map((i)=>i.replace(/[^\w-]/,""))),this}toggle(o,i){let n=typeof o!="string"?o.apply(this):o;return this.e.classList.toggle(n,i)}hasNode(o){return this.e.contains(o)}has(...o){let i=this.e.classList;return o.every((n)=>i.contains(n))}insert(o){return{HTML:(...i)=>{return i.forEach((n)=>{this.e.insertAdjacentHTML(o,n)}),this},element:(...i)=>{return i.forEach((n)=>{this.e.insertAdjacentElement(o,n)}),this},text:function(...i){return i.forEach((n)=>{this.e.insertAdjacentText(o,n)}),this}}}is(o){let i=this.e.classList,n=this.e.tagName.toLocaleLowerCase(),r=!0,f=!0;if(o.dom)f=o.dom==n?!0:!1;if(o.class)if(Array.isArray(o.class))o.class.forEach((t)=>{r=r?i.contains(t):!1});else r=r?i.contains(o.class):!1;return r&&f}on(o,i,n=!1){let r=!1;if(o.indexOf("touch")>-1)r=!0;return this.e.addEventListener(o,i,{capture:n,passive:r}),this}remove_on(o,i,n=!1){return this.e.removeEventListener(o,i,n),this}timed(o,i=250){return setTimeout(()=>o(this),i),this}animate(o,i,n){let r={duration:300,easing:"ease",fill:"forwards"};if(Z(i))n=i;else T(r,i);let f=this.e.animate(o,r);if(n)f.finished.then(n);return this}query(o){return this.e.querySelector(o)}queryAll(o){let i=this.e.querySelectorAll(o);if(i.length)return Array.from(i).map((n)=>n);return[]}newChild(o,i={}){let n=document.createElement(o);return this.e.appendChild(n),Object.assign(n,structuredClone(i)),new M(n)}newChildNS(o,i={}){let n=document.createElementNS("http://www.w3.org/2000/svg",o);return this.e.appendChild(n),Object.assign(n,structuredClone(i)),new M(n)}get(o){return this.e[o]}}var to=new g,s=(o)=>{if(L)return;let i=to.get(o);if(i?.isConnected)return i;to.delete(o);let n=document.getElementById(o);if(!n)return;return to.set(o,n),n};function Li(){let o=[];for(let[i,n]of to)if(!n.isConnected)o.push(i),to.delete(i);return o}function B(o,i){let n=i?i:document;if(V(o)){let r=n.querySelector(o);if(r)return new M(r,o);return}else if(I(o)){let[[r,f]]=y(o),u=`${r==="id"?"#":"."}${f}`,x=n.querySelector(u);if(x)return new M(x,u);return}else return new M(o)}class ro{state=new W(void 0);constructor(){}get element(){return this.state.value?.e}set element(o){if(o)this.state.value=new M(o);else this.state.value=void 0}get $(){return this.state.value}}var yn=()=>{return new ro};var Hn=(o,i,n)=>{return o.addEventListener(i,n),()=>{o.removeEventListener(i,n)}},uo={};class Lo{events=new g;states=new g;windowEvents=new g;resetST=new g;resetEV=new g;get keys(){return[...new Set([...this.states.keys(),...this.events.keys()])]}set(o){let{id:i,events:n,states:r}=o;if(i){if(n.size)this.events.set(i,n);if(r.length)this.states.set(i,r)}return this}push(o){return o.events.forEach((i,n)=>{i.forEach((r,f)=>{To(n,this.events).set(f,r)})}),o.states.forEach((i,n)=>{a(n,this.states).push(...i)}),this}get stage(){return this.events.forEach((o,i)=>{this.events.delete(i);let n=s(i);if(!n){this.events.delete(i);return}o.forEach((r,f)=>{switch(f){case"ready":case"element":r.apply(n,[n]);break;case"resize":case"beforeunload":case"popstate":case"winscroll":case"winload":case"winfocus":case"winblur":let t=f.replace(/^win/,"");this.windowEvents.init(t,new g).set(i,r);break;case"state":let[u,x,m]=r.apply(n,[n]),H=b(x)?x:[x];if(!H.length)break;let Y=()=>H.map((G)=>G.value),z=()=>u(...Y());if(m)z();H.forEach((G)=>a(i,this.resetST).push(G.call(z,i+"_state")(i)));break;default:a(i,this.resetEV).push(Hn(n,f,r))}})}),this.processWindowEvents,this.states.forEach((o,i)=>{this.states.delete(i),o.forEach((n)=>{a(i,this.resetST).push(n(i))})}),this}get processWindowEvents(){let o=(i,n)=>{let r=0,f=!1,t=(x)=>{if(r=window.scrollY,!f)window.requestAnimationFrame(()=>{n.forEach((m,H)=>{let Y=s(H);if(Y)m.call(Y,x);else this.windowEvents.get(i)?.delete(H)}),f=!1}),f=!0},u=(x)=>{n.forEach((m,H)=>{let Y=s(H);if(Y)m.call(Y,x);else this.windowEvents.get(i)?.delete(H)})};return window.addEventListener(i,i==="scroll"?t:u),()=>{window.removeEventListener(i,i==="scroll"?t:u)}};return this.windowEvents.forEach((i,n)=>{if(i.size){if(!uo[n])uo[n]=o(n,i)}else if(uo[n])uo[n](),delete uo[n]}),this}reset(o){return o.forEach((i)=>{this.windowEvents.forEach((n,r)=>{if(n.has(i))n.delete(i)}),this.resetEV.get(i)?.forEach((n)=>{n()}),this.resetST.get(i)?.forEach((n)=>{n()}),this.resetST.delete(i),this.resetEV.delete(i)}),this}RPS(o){if(o){let i=Li();this.reset(i);let n=o.keys;if(n.length)this.reset(n).push(o).stage}return this}}var F=new Lo;class fo{xid;IDM;map=new g;states=[];events=new g;OZ;constructor(o,i=new X,n){this.xid=o;this.IDM=i;this.OZ=n??new Lo}attr_push(o,i,n){let r=n??o;if(!this.map.has(r))this.map.set(r,[]);let f=n?`${E(o)}:${i};`:i;this.map.get(r).push(f)}get attr(){let o=[""];return this.map.forEach((i,n)=>{let r=i.join("");o.push(r?`${n}="${r}"`:n)}),o.join(" ")}set id(o){if(!this.map.has("id"))this.map.set("id",[o])}get id(){return this.map.get("id")?.join("")}}async function Ui(o,i){return await Zo(o,new X(i))}async function Zo(o,i=new X){let{tag:n,attr:r,ctx:f}=await Promise.resolve(o),t=i instanceof X?i:new X(i),u=t.mid,x=new fo(u,t),m=new Do(r),H=new Vo(n,f);return m.get(x),{ctx:await H.get(x),oz:x.OZ.set(x),id:x.id}}class C{tag;attr;ctx;constructor(o,i,n){this.tag=o;this.attr=i;this.ctx=n}}async function h(o,i={},...n){if(Z(o))return await o(i??{},...n);return new C(o,i??{},n)}var Yn=async(o,...i)=>new C("",{},i);async function Ai(o={},i){let n=B("link[rt]")?.all.map((r)=>()=>r.remove())||[];if(o&&D(o))for(let r of R(o)){if(r.x)continue;try{await Fo(r)}catch(f){j.e=["link error",{error:"Huntr @ link"}]}}return n}var hn=["charset","name","property","http-equiv"];async function Gi(o){let i={};if(B("meta")?.all.forEach((n)=>{let r=n.attributes;for(let f of hn)if(f in r){let t=r[f].value;i[`${f}_${f==="charset"?"":t}`]=n}}),o)y(o).forEach(([n,r])=>{if(n in i)B(i[n]).attr.set(r),delete i[n];else{let f=B(document.createElement("meta"));f.attr.set(r),document.head.append(f.e)}});return R(i).map((n)=>B(n).unload)}async function Xi(o,i=!1){let n=B("script[rt]")?.all.map((r)=>()=>r.remove())||[];if(o&&D(o))for(let r of R(o)){if(r.x)continue;try{await gi(r)}catch(f){j.e=["script error",{error:"Huntr @ script"}]}}return n}class xo extends Wo{path="";data={};args={};importArgs=[];static A=(o,...i)=>{return h("a",o||{},...i)}}async function Ji(o,i=!1){if(!i&&o.fetch)T(o.data,await o.fetch());return[await _o(await o.body?.(),o.importArgs),Bn.call(this,o)]}async function _o(o,i=[]){let n=o||"";if(Jo(o)){let r=o.default,f=Z(i)?i():i;n=Z(r)?await r.apply({},f):r}return b(n)?n:[n]}function Bn(o){let i=new io({push:{rt:this.id}});return i.htmlHead=structuredClone(this.htmlHead),i.head(o),i.htmlHead}async function qi(o,i){document.title=o.get("title")||"",wo(await Ai(o.get("link"),i)),wo(await Xi(o.get("script")));let n=await Gi(o.get("meta"));wo(n)}var wo=(o)=>{o.forEach((i)=>i())};class Uo{onChange;popListener;constructor(o=Q(""),i=!1,n){if(this.onChange=n,this.onChange?.(this.path(),history.state??{path:this.path()}),this.popListener=(r)=>{let f=r.state??{path:this.path()},t=f?.path;if(i&&t)t=t==="/"?t:t.replace(/\/+$/g,"");o.value=t||o.value,this.onChange?.(this.path(),f)},v)window.addEventListener("popstate",this.popListener)}path(){let{pathname:o,search:i,hash:n}=window.location;return`${o}${i}${n}`}state(){return window.history.state??{path:this.path()}}navigate(o,i,n=""){let r=this.resolve(o),f=this.path();if(this.samePath(f,r))return;let t={...i,path:r};window.history.pushState(t,n,r),this.onChange?.(this.path(),t)}replace(o,i,n=""){let r=this.resolve(o),f=this.path();if(this.samePath(f,r))return;let t={...i,path:r};window.history.replaceState(t,n,r),this.onChange?.(this.path(),t)}back(){window.history.back()}forward(){window.history.forward()}destroy(){if(this.popListener)window.removeEventListener("popstate",this.popListener),this.popListener=void 0}resolve(o){let i=new URL(o,window.location.origin);return`${i.pathname}${i.search}${i.hash}`}samePath(o,i){return o===i}}class Oo{lang;head="";constructor(o,i){if(this.lang=o,i)this.head=bi(i)}body(o,i,n){return[`<!DOCTYPE html><html lang="${this.lang}">`,`<head>${this.head}</head>`,`<body id="${i}"${n?" "+n:""}>${o}</body>`,"</html>"].join("")}}class mo{path="";data={};args={};importArgs=[];static Button=(o,...i)=>{return h("button",o||{},...i)}}class Xo extends Ho{cls;constructor(o,i){super(o);this.cls=i}}class Ao extends Xo{}class Ri extends Xo{}class No{storage=new _;error=new _}class so extends No{wss=new _;setRoute(o,i){this.storage.set(new Ao(o,i))}getRoute(o,i){let[n,r]=this.storage.get(o);if(!n){let[t=new Ao(o,Qi)]=this.getError(i),u=new t.cls;return u.args=r,T(u,{args:r})}let f=new n.cls;return T(f,{args:r})}setWss(o,i){this.wss.set(new Ri(o,i))}getWss(o){return this.wss.get(o)}setError(o,i){this.error.set(new Ao(o.toString(),i))}getError(o=404){return this.error.get(o.toString())}}class Go extends Xo{}class po extends No{setRoute(o,i){this.storage.set(new Go(o,i))}getRoute(o,i){let[n,r]=this.storage.get(o);if(!n){let[t=new Go(o,Mi)]=this.getError(i),u=new t.cls;return u.args=r,T(u,{args:r})}let f=new n.cls;return T(f,{args:r})}setWss(o){}getWss(o){}setError(o,i){this.error.set(new Go(o.toString(),i))}getError(o=404){return this.error.get(o.toString())}}class Qi extends xo{body(){return h("div",{},this.path+" not found...")}}class Mi extends mo{body(){return h("div",{},`${this.path} not found...`)}}class co extends io{id;data;path;_root;constructor(){super({mark:!0});this.id=K(6),this.path=Q("/"),this._root=Q([]),this.data={}}A(o,...i){let{on:n,...r}=o,f=this.path,t={...n||{},click(u){u.preventDefault();let x=B(this).path;f.value=x}};return h("a",{on:t,...r},...i)}_main;async getMain(o){return await h("main",{...o&&{class:o}},await this._main?.(this._root)||this._root)}}A([U,$("design:type",Function),$("design:paramtypes",[typeof aAttr==="undefined"?Object:aAttr,Object]),$("design:returntype",void 0)],co.prototype,"A",null);class lo extends co{pushHistory;storage=new so;base;constructor(o="/",i="",n=!1){super();this.pushHistory=n;this.base=o?o.startsWith("/")?o:`/${o}`:"";let r=this.base;this.head({script:[{type:"module",src:"./index.js"}],...{base:[{href:r==="/"?r:`${r}/`,target:"_blank"}]},meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"}]})}route(o){return(i)=>{return i.A=(n,...r)=>{if(n.href&&b(n.href))n.href=ko(o,n.href);else if(!n.href)n.href=o;return this.A(n,...r)},this.storage.setRoute(o,i),i}}error(...o){return(i)=>{if(o.length)o.forEach((n)=>{this.storage.setError(n,i)});return i}}wss(o){return(i)=>{return this.storage.setWss(o,i),i}}}A([U,$("design:type",Function),$("design:paramtypes",[String]),$("design:returntype",void 0)],lo.prototype,"route",null),A([U,$("design:type",Function),$("design:paramtypes",[Object]),$("design:returntype",void 0)],lo.prototype,"error",null),A([U,$("design:type",Function),$("design:paramtypes",[String]),$("design:returntype",void 0)],lo.prototype,"wss",null);function ko(o,i){let n=0;return o.replace(/<[^>]+>/g,()=>i[n++])}class Ei{id=K(5);path=Q("");_root=Q([]);Button(o,...i){let n=this.path,{on:r,...f}=o,t={...r||{},click(u){u.preventDefault();let m=B(this).attr.get("tab");if(!m)return;n.value=m}};return h("button",{on:t,...f},...i)}}A([U,$("design:type",Function),$("design:paramtypes",[Object,Object]),$("design:returntype",void 0)],Ei.prototype,"Button",null);class vo extends Ei{storage=new po;hasLoaded=!1;constructor({path:o}={}){super();if(o)this.path=o}tab(o){return(i)=>{return i.Button=(n,...r)=>{if(n.tab&&b(n.tab))n.tab=ko(o,n.tab);else if(!n.tab)n.tab=o;return this.Button(n,...r)},this.storage.setRoute(o,i),i}}Main(o){let{tab:i,data:n={},...r}=o;if(i)this.load(i,n);return h("main",{...r},this._root)}async load(o,i={}){this.path.value=this.path.value||o,await N(async(n)=>{this._root.value=await Zn.call(this,n,i)},[this.path],{id:this.id,init:!0})}}A([U,$("design:type",Function),$("design:paramtypes",[String]),$("design:returntype",void 0)],vo.prototype,"tab",null),A([U,$("design:type",Function),$("design:paramtypes",[Object]),$("design:returntype",void 0)],vo.prototype,"Main",null),A([U,$("design:type",Function),$("design:paramtypes",[String,typeof obj==="undefined"?Object:obj]),$("design:returntype",Promise)],vo.prototype,"load",null);async function Zn(o,i={},n){let r=this.storage.getRoute(o,n);return T(r,{path:o,data:i}),_o(await r.body?.(),r.importArgs)}class ao{path;args;route="/";isConnected=Q(!1);data={};constructor(o,i={}){this.path=o;this.args=i;this.data=i}open(o){}message(o){}close(o){}error(o){}get connect(){if(this.ws&&this.ws.readyState<=1)return this;return this.ws=new WebSocket(this.path),this.ws.onopen=async(o)=>{this.isConnected.value=!0,await this.open.call(this,o)},this.ws.onmessage=async(o)=>{await this.message.call(this,o)},this.ws.onclose=async(o)=>{this.isConnected.value=!1,await this.close.call(this,o)},this.ws.onerror=async(o)=>{this.isConnected.value=this.ws.readyState<=1,await this.error.call(this,o)},this}get reconnect(){if(this.state>=2)this.connect;return this}get disconnect(){if(this.state<=1)this.ws.close();return this}get state(){return this.ws?.readyState??3}set send(o){if(this.isConnected.value)this.ws.send(o);else throw Error(`websocket path ${this.path} not connected`)}}var p=new g;class eo{yvee;constructor(o){this.yvee=o}async load(o){if(L)return;if(!p.has(o)){let[n,r]=this.yvee.storage.getWss(o);if(!n)return;let{cls:f,path:t}=n,u=new f(t,r).connect;return p.set(o,u),u}let i=p.get(o);return i.reconnect,i}unload(o){if(L)return;if(p.has(o)){let i=p.get(o);if(!i)return;i.disconnect,p.delete(o)}}}class Fi extends lo{isDev;history;constructor({base:o,history:i,index:n,isDev:r=!1}={}){super(o,n,i);let f=this;this.isDev=r,this.history=new Uo(this.path,this.isDev),T(this,{get yvee(){return f}})}Main(o){this._main=o}async render(o={}){let{id:i,data:n,class:r}=o;if(v){let f=window.location.pathname;if(this.isDev)f=f.replace(/\/+$/g,"");this.path.value=f;let t=document.body.id;this.id=t;let[u,x]=await Wi.call(this,this.path.value,r);return F.push(x.oz),requestAnimationFrame(()=>{F.stage,this.init(n)}),()=>{}}return async({path:f,data:t={},error:u=0})=>{if(i)this.id=i;this.path.value=f;let[x,m]=await Wi.call(this,this.path.value,r,u,t,!0);return new Oo(this.lang,x).body(m.ctx,this.id)}}async init(o={}){let i=this.id;N(async(n)=>{let[r,f]=await zi.call(this,n,o);await qi(f,i),this._root.value=r,this.pushHistory&&this.history.navigate(n)},[this.path],{id:i})}}A([U,$("design:type",Function),$("design:paramtypes",[Function]),$("design:returntype",void 0)],Fi.prototype,"Main",null),A([U,$("design:type",Function),$("design:paramtypes",[typeof renderConfig==="undefined"?Object:renderConfig]),$("design:returntype",Promise)],Fi.prototype,"render",null);async function zi(o,i={},n=!1,r){let f=this.storage.getRoute(o,r);return T(f,{path:o,data:i}),await Ji.call(this,f,n)}async function Wi(o,i,n,r={},f=!1){let[t,u]=await zi.call(this,o,r,f,n);this._root.value=t;let x=await this.getMain(i),m=await Ui(await this.getMain(i),this.id);return[u,m]}var Ln=(o)=>{return(i)=>{return o(i)}};export{ao as websocket,yn as useRef,eo as socket,Zo as renderDom,j as log,Yn as frag,h as dom,xo as doc,Fo as cssLoader,mo as content,U as bind,rn as addCSS,Io as __,Fi as Yvee,Yo as Time,vo as Tabs,W as Stateful,N as StateHook,Q as State,Ln as Routes,ro as Ref,xn as QState,Uo as PathHistory,oo as Meta,ki as IfClient,C as DOM,B as $};
