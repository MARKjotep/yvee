// @bun
var x=function(t,e,r,s){var i=arguments.length,a=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(t,e,r,s);else for(var o=t.length-1;o>=0;o--)if(n=t[o])a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a;return i>3&&a&&Object.defineProperty(e,r,a),a};var f=(t,e)=>{if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,e)};var{getPrototypeOf:Xr,defineProperty:wr,getOwnPropertyNames:Vr}=Object;var Mr=(t,e)=>{for(var r in e)wr(t,r,{get:e[r],enumerable:!0,configurable:!0,set:(s)=>e[r]=()=>s})};var At={};Mr(At,{isWhitespace:()=>xe,isWeakSet:()=>ge,isWeakMap:()=>ce,isUndefined:()=>jt,isUint8Array:()=>ae,isSymbol:()=>ee,isSubclassOf:()=>ke,isString:()=>F,isSet:()=>me,isRegExp:()=>Te,isRecord:()=>ue,isReadonlyArray:()=>re,isPromise:()=>Ye,isPrimitive:()=>Ee,isPositiveNumber:()=>$e,isPlainObject:()=>$,isObjectLike:()=>de,isObject:()=>A,isNumberLike:()=>$t,isNumber:()=>D,isNullish:()=>be,isNull:()=>lt,isNotNullish:()=>we,isNotNull:()=>Z,isNonNegativeNumber:()=>je,isNonFunctionObject:()=>pe,isNonEmptyString:()=>Se,isNonEmptyObject:()=>oe,isModule:()=>ht,isMap:()=>he,isIterable:()=>fe,isInteger:()=>Ht,isInstanceOf:()=>Ne,isFunction:()=>p,isFiniteNumber:()=>Ae,isError:()=>De,isEmptyString:()=>Me,isEmpty:()=>Re,isDefined:()=>ye,isDate:()=>He,isClass:()=>Oe,isBoolean:()=>W,isBinaryLike:()=>ne,isBigInt:()=>te,isAsyncIterable:()=>le,isAsyncFunction:()=>Pe,isArrayBufferView:()=>ie,isArrayBuffer:()=>se,isArray:()=>l,IS_NOT_BROWSER:()=>y,IS_BROWSER:()=>q});var W=(t)=>typeof t==="boolean",F=(t)=>typeof t==="string",D=(t)=>typeof t==="number"&&!Number.isNaN(t),te=(t)=>typeof t==="bigint",ee=(t)=>typeof t==="symbol",p=(t)=>typeof t==="function",$t=(t)=>{let e=typeof t==="number"?t:parseFloat(String(t));return!Number.isNaN(e)&&Number.isFinite(e)},l=(t)=>Array.isArray(t),re=(t)=>Array.isArray(t),se=(t)=>t instanceof ArrayBuffer,ie=(t)=>typeof ArrayBuffer<"u"&&ArrayBuffer.isView(t),ae=(t)=>t instanceof Uint8Array,ne=(t)=>t instanceof Uint8Array||t instanceof ArrayBuffer||typeof t==="string",A=(t)=>Z(t)&&typeof t==="object",$=(t)=>Z(t)&&A(t)&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null),oe=(t)=>$(t)&&Object.keys(t).length>0,ue=(t)=>$(t),fe=(t)=>t!=null&&typeof t[Symbol.iterator]==="function",le=(t)=>t!=null&&typeof t[Symbol.asyncIterator]==="function",he=(t)=>t instanceof Map,me=(t)=>t instanceof Set,ce=(t)=>t instanceof WeakMap,ge=(t)=>t instanceof WeakSet,de=(t)=>t!==null&&(typeof t==="object"||typeof t==="function"),pe=(t)=>t!==null&&typeof t==="object",lt=(t)=>t===null,jt=(t)=>t===void 0,ye=(t)=>!jt(t),be=(t)=>t==null,Z=(t)=>t!==null,we=(t)=>t!=null,Me=(t)=>typeof t==="string"&&t.length===0,Se=(t)=>typeof t==="string"&&t.length>0,xe=(t)=>typeof t==="string"&&t.length>0&&t.trim().length===0,Ht=(t)=>D(t)&&Number.isInteger(t),Ae=(t)=>D(t)&&Number.isFinite(t),$e=(t)=>D(t)&&Number.isFinite(t)&&t>0,je=(t)=>D(t)&&Number.isFinite(t)&&t>=0,He=(t)=>t instanceof Date&&!Number.isNaN(t.getTime()),Te=(t)=>t instanceof RegExp,De=(t)=>t instanceof Error,Ye=(t)=>!!t&&typeof t.then==="function",Re=(t)=>t==null||typeof t==="string"&&t.length===0||Array.isArray(t)&&t.length===0||(t instanceof Map||t instanceof Set)&&t.size===0||$(t)&&Object.keys(t).length===0,Ee=(t)=>t===null||typeof t!=="object"&&typeof t!=="function",ht=(t)=>Z(t)&&A(t)&&t[Symbol.toStringTag]==="Module",q=typeof window<"u",y=typeof window>"u",Pe=(t)=>p(t)&&Z(t.constructor)&&t.constructor.name==="AsyncFunction",Oe=(t)=>typeof t==="function"&&/^class\s/.test(Function.prototype.toString.call(t)),Ne=(t,e)=>t instanceof e,ke=(t,e)=>typeof t==="function"&&typeof e==="function"&&t.prototype.isPrototypeOf(e.prototype),Fe=(t)=>Array.from({length:t},(e,r)=>r),T=(t)=>JSON.stringify(t),Le=(t)=>{return JSON.parse(t)};var Y=(t)=>{if(t.startsWith("webkit"))t="-"+t;return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},Ce=(t=6,e)=>{if(!e)return Math.floor(Math.random()*t);return Math.round(Math.random()*(e-t)+t)},Ue=()=>{let t=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ",..."abcdefghijklmnopqrstuvwxyz"],e=Ce(0,t.length);return t[e]};var N=(t)=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=Fe(10).join("");return Array.from({length:t},(s,i)=>e+(i?r:"")).reduce((s,i)=>{return s+=i.charAt(Math.floor(Math.random()*i.length))},"")};class m extends Map{obj(t){t&&g(t).forEach(([e,r])=>this.set(e,r))}map(t){t.forEach((e,r)=>{if(e instanceof m)this.set(r,e);else if(l(e)){if(this.lacks(r))this.set(r,[]);this.get(r).push(...e)}else if(A(e))this.ass(r,e);else this.set(r,e)})}ass(t,e){if(!this.has(t))this.set(t,{});h(this.get(t),e)}lacks(t){return!this.has(t)}init(t,e){return this.has(t)?this.get(t):this.set(t,e).get(t)}}var z=(t,e)=>{if(!e.has(t))e.set(t,new m);return e.get(t)},J=(t,e)=>{if(!e.has(t))e.set(t,[]);return e.get(t)},R=Object.values,B=Object.keys,g=Object.entries;var{defineProperty:Ie,assign:h}=Object,_e=(t,e)=>Object.hasOwn(t,e),O=(t)=>Object.keys(t).length,tt=(t,e)=>{let r={added:{},removed:{},modified:{}},s=B(t),i=B(e);for(let a of i){let n=t[a],o=e[a];if(!(a in t)){r.added[a]=o;continue}if(l(n)&&l(o)){if(T(n)!==T(o))r.modified[a]={old:n,new:o};continue}if(A(n)&&A(o)&&!lt(n)&&!lt(o)){let u=tt(n,o);if(O(u.added)||O(u.removed)||O(u.modified))r.modified[a]={old:n,new:o};continue}if(n!==o)r.modified[a]={old:n,new:o}}for(let a of s)if(!(a in e))r.removed[a]=t[a];return r},mt=(t)=>Object.values(t).some((e)=>O(e));function Tt(t,e){if(t.size!==e.size)return!0;for(let r of t)if(!e.has(r))return!0;return!1}var C=(t)=>l(t)?t:[t];function Dt(t=3){let e=((Error().stack?.split(`
`)??[])[t]||"").match(/at\s+([^(]+)\s*\(/);return(e?e[1].split(".").pop()?.trim():"?")??"?"}class Be{name;constructor(t){this.name=t}log=(...t)=>{let e=Dt(3);console.log(`[${this.name}.${e}]`,...t)};set i(t){let e=Dt(3);console.log(`[${this.name}.${e}]`,...C(t))}}class U{static logger=(t)=>{return new Be(F(t)?t:t.constructor.name)};static set f(t){let e=Dt();console.log(`[${e}]`,...C(t))}static set i(t){console.info(...C(t))}static set e(t){console.error(...C(t))}static set w(t){console.warn(...C(t))}static set d(t){let e=new Date().toLocaleTimeString();console.log(...C(t),`@ ${e}`)}static get d(){let t=new Date().toLocaleTimeString();console.log(`@ ${t}`);return}}class Yt{static rand(t=6,e){if(e)return Math.floor(Math.random()*(e-t+1)+t);return Math.floor(Math.random()*t)+1-1}static fill(t,e=null){return Array(t).fill(e)}static new({dom:t,id:e,inner:r}){let s=document.createElement(t);if(e)s.id=e;if(r)s.innerHTML=r;return s}static randFrom(t){if(Array.isArray(t)){let e=t.length,r=this.rand(0,e-1);return t[r]}else if(typeof t=="object"){let e=B(t),r=e.length,s=this.rand(0,r-1);return e[s]}}static randArray(t=[],e=1,r=!1){let s=[],i=r?new Set:null;while((r?i.size:s.length)<e){let a=t[Yt.rand(0,t.length-1)];r?i.add(a):s.push(a)}return r?[...i]:s}static randomAZ=Ue;static makeID=N;static class(t,...e){let r=e.filter(Boolean);if(t?.class)r.push(...l(t.class)?t.class:[t.class]);if(r.length)t.class=r}static get O(){return{vals:R,keys:B,items:g,has:_e,ass:h,len:(t={})=>B(t).length}}static get is(){return At}static get return(){return Ze}static isHREF(t,e){return t===e?!0:t.startsWith(e)&&e!=="/"?!0:!1}static sleep=(t=1000)=>new Promise((e)=>setTimeout(e,t));static get screen(){let{innerWidth:t}=window,e={xs:t<=480,sm:t>=480,smd:t>=624,md:t>=768,lg:t>=1024,xl:t>=1280,xxl:t>=1536},r=g(e).reverse();for(let s=0;s<r.length;s++){let[i,a]=r[s];if(a)return i}return}bytes(t){if(t===0)return"0 Bytes";let e=1024,r=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,s)).toFixed(2))+" "+r[s]}static format(t){return new qe(t)}static compareObjects=tt;static isObjectUdpated=mt}class Ze{static arr(t){return t?l(t)?t:[t]:[]}static num(t,e=0){let r=parseFloat(t);return isNaN(r)?e:r}static str(t){return String(t)}static arr2obj(t,e=!1){return t.reduce((r,s,i)=>{if(e)r[s]=i;else r[i]=s;return r},{})}}class qe{val;constructor(t){this.val=t}get px(){return`${this.val}px`}get rem(){return`${this.val}rem`}get pr(){return`${this.val}%`}}var M=(t,e,r)=>{let s=r.value;return{configurable:!0,get(){if(this===t.constructor.prototype)return s;let i=s.bind(this);return Object.defineProperty(this,e,{value:i,configurable:!0,writable:!0}),i}}};var Sr=(t)=>{if(y)return null;return t()},xr=(t,e=!1)=>{if($t(t)){let r=+t;return[r,Ht(r)?"int":"float"]}if(e&&/\.\w+$/.test(t))return[t,"file"];if(t==="/")return[t,"-"];if(t.length===36&&t.match(/\-/g)?.length===4)return[t,"uuid"];return[t,"string"]},Je=(t)=>{let e=t.startsWith("/")?t:"/"+t,r=e.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],[s,i]=r.reduce(([a,n],o)=>{if(o.includes("<")){let u=o.match(/(?<=<)[^/].*?(?=>|$)/g);if(u?.length){let[c,d]=u[0].split(":");if(c)a.push(c),n.push(d||"_")}}else a.push(o===">"?"/":o);return[a,n]},[[],[]]);if(e.endsWith("/")&&e.length>1)s.push("/");return{parsed:s,args:i}};class Ge{storage;constructor(){this.storage=new m}cache(t,e){if(this.storage.lacks(t))this.storage.set(t,e());return this.storage.get(t)}}var Ar=["int","float","file","uuid","string"];class et{_storage;CC;constructor(){this._storage=new m,this.CC=new Ge}set(t){let{parsed:e,path:r}=t,s=T(e);if(!this._storage.get(s))this._storage.set(s,t);else throw`path: ${r} already used.`}get(t){let{parsed:e}=this.CC.cache(t,()=>Je(t)),r={},s=this._storage.get(T(e));if(!s&&t!=="/")for(let i of this._storage.keys()){let a=[],n=Le(i);if(e.length===n.length){let o=n.map((c,d)=>{let S=xr(e[d],e.length-1===d);if(c===S[0])return S[0];if(Ar.includes(S[1]))return a.push(S[0]),S[1];return c}),u=T(o);if(this._storage.has(u)){s=this._storage.get(u),s?.args.forEach((c,d)=>{r[c]=a[d]});break}}}return[s,r]}keys(){return this._storage.keys()}}class Rt{path="";parsed=[];args=[];constructor(t){$r(this,{path:t,...Je(t)})}}function $r(t,e){g(e).forEach(([r,s])=>{Ie(t,r,{value:s,writable:!1,configurable:!1,enumerable:!0})})}var L=(t,e=2)=>String(t).padStart(e,"0"),We=new Map;function G(t,e){let r=JSON.stringify({locale:e,...t}),s=We.get(r);if(!s)s=new Intl.DateTimeFormat(e,t),We.set(r,s);return s}var Et={YYYY:(t)=>String(t.getFullYear()),YY:(t)=>L(t.getFullYear()%100),MMMM:(t,e)=>G({month:"long"},e).format(t),MMM:(t,e)=>G({month:"short"},e).format(t),MM:(t)=>L(t.getMonth()+1),M:(t)=>String(t.getMonth()+1),dddd:(t,e)=>G({weekday:"long"},e).format(t),ddd:(t,e)=>G({weekday:"short"},e).format(t),DD:(t)=>L(t.getDate()),D:(t)=>String(t.getDate()),HH:(t)=>L(t.getHours()),H:(t)=>String(t.getHours()),hh:(t)=>{let e=t.getHours()%12||12;return L(e)},h:(t)=>String(t.getHours()%12||12),A:(t,e)=>{return(G({hour:"numeric",hour12:!0},e).formatToParts(t).find((r)=>r.type==="dayPeriod")?.value??(t.getHours()<12?"AM":"PM")).toUpperCase()},a:(t,e)=>{return(G({hour:"numeric",hour12:!0},e).formatToParts(t).find((r)=>r.type==="dayPeriod")?.value??(t.getHours()<12?"AM":"PM")).toLowerCase()},mm:(t)=>L(t.getMinutes()),m:(t)=>String(t.getMinutes()),ss:(t)=>L(t.getSeconds()),s:(t)=>String(t.getSeconds()),SSS:(t)=>L(t.getMilliseconds(),3),Q:(t)=>String(Math.floor(t.getMonth()/3)+1),DoY:(t)=>{let e=new Date(t.getFullYear(),0,1),r=Math.floor((+t-+e)/86400000)+1;return String(r)}};function jr(){if(globalThis.__dateTokenRegex)return globalThis.__dateTokenRegex;let t=new RegExp(Object.keys(Et).sort((e,r)=>r.length-e.length).map((e)=>e.replace(/([.*+?^${}()|[\]\\])/g,"\\$1")).join("|"),"g");return globalThis.__dateTokenRegex=t,t}function Ke(t,e="YYYY-MM-DD HH:mm:ss",r){let s=typeof t==="number"?new Date(t):typeof t==="string"?new Date(t):t,i=jr(),a=new Map;return e.replace(i,(n)=>{if(a.has(n))return a.get(n);let o=Et[n],u=o?o(s,r):n;return a.set(n,u),u})}Date.prototype.format=function(t,e){return Ke(this,t,e)};Date.registerFormat=function(t,e){Et[t]=e,globalThis.__dateTokenRegex=null};Date.format=function(t,e){return new Date().format(t,e)};class ct{date;constructor(t){this.date=t?new Date(t):new Date}timed(t,e=1){let r=[["year","FullYear"],["month","Month"],["day","Date"],["hour","Hours"],["minute","Minutes"],["second","Seconds"],["millisecond","Milliseconds"]],s=this.date;if(t.quarter)s.setMonth(s.getMonth()+3*t.quarter);if(t.week)s.setDate(s.getDate()+7*t.week);for(let[i,a]of r){let n=t[i];if(n!==void 0&&n!==0)s[`set${a}`](s[`get${a}`]()+n)}if(t.startOfMonth)s.setDate(1),s.setHours(0,0,0,0);if(t.endOfMonth)s.setMonth(s.getMonth()+1,0),s.setHours(23,59,59,999);if(t.week!==void 0&&e!==void 0){let i=(s.getDay()-e+7)%7;s.setDate(s.getDate()-i)}return s}static timed(t,e=1){return new ct().timed(t,e)}static local(t){return new Date(t).toLocaleString()}local(){return this.date.toLocaleDateString()}format(t="YYYY-MM-DD HH:mm:ss",e){return Ke(this.date,t,e)}static format(t="YYYY-MM-DD HH:mm:ss",e){let r=new Date,s=typeof r==="number"?new Date(r):typeof r==="string"?new Date(r):r,i=(v,br=2)=>String(v).padStart(br,"0"),a=s.getHours(),n=a%12||12,o=new Intl.DateTimeFormat(e,{month:"long"}).format(s),u=new Intl.DateTimeFormat(e,{month:"short"}).format(s),c=new Intl.DateTimeFormat(e,{weekday:"long"}).format(s),d=new Intl.DateTimeFormat(e,{weekday:"short"}).format(s),S=new Intl.DateTimeFormat(e,{hour:"numeric",hour12:!0}).formatToParts(s).find((v)=>v.type==="dayPeriod")?.value||(a<12?"AM":"PM"),V={YYYY:String(s.getFullYear()),YY:i(s.getFullYear()%100),MMMM:o,MMM:u,MM:i(s.getMonth()+1),M:String(s.getMonth()+1),dddd:c,ddd:d,DD:i(s.getDate()),D:String(s.getDate()),HH:i(a),H:String(a),hh:i(n),h:String(n),A:S.toUpperCase(),a:S.toLowerCase(),mm:i(s.getMinutes()),m:String(s.getMinutes()),ss:i(s.getSeconds()),s:String(s.getSeconds()),SSS:i(s.getMilliseconds(),3),Q:String(Math.floor(s.getMonth()/3)+1)};return t.replace(/YYYY|YY|MMMM|MMM|MM|M|dddd|ddd|DD|D|HH|H|hh|h|A|a|mm|m|ss|s|SSS|Q/g,(v)=>V[v])}static get now(){return Date.now()}random(t=new Date){let e=this.date.getTime(),r=t.getTime(),s=e+Math.random()*(r-e);return new Date(s)}static random(t,e=new Date){let r=t.getTime(),s=e.getTime(),i=r+Math.random()*(s-r);return new Date(i)}delta(t){let e=this.date;if(t.year)e.setFullYear(e.getFullYear()+t.year);if(t.month)e.setMonth(e.getMonth()+t.month);if(t.day)e.setDate(e.getDate()+t.day);if(t.hour)e.setHours(e.getHours()+t.hour);if(t.minute)e.setMinutes(e.getMinutes()+t.minute);if(t.second)e.setSeconds(e.getSeconds()+t.second);return e}static delta(t){return new ct().delta(t)}}var Qe="d-css",Hr=()=>{let t=document.querySelector(`#${Qe}`)?.sheet;if(t)return t;let e=document.createElement("style");return e.id=Qe,document.head.appendChild(e),e.sheet??void 0};var Tr=(t)=>Object.entries(t).map(([e,r])=>`${Y(e)}: ${String(r)};`).join(" ");function Dr(t,e={}){if(y)return;let r=Hr();if(!r)return;let s,{cssRules:i}=r;for(let n=0;n<i.length;n++){let o=i[n];if(o instanceof CSSStyleRule&&o.selectorText===t){s=n;break}}if(s!==void 0)r.deleteRule(s);let a=`${t} { ${Tr(e)} }`;r.insertRule(a,r.cssRules.length)}class j{counter;baseId;constructor(t){if(t&&t.includes("-")){let e=t.split("-"),r=e.pop()??"0",s=e.join("-");this.baseId=s||N(5),this.counter=D(r)?parseInt(r,10):0}else this.baseId=t??N(5),this.counter=0}get id(){return`${this.baseId}-${this.counter}`}get nextId(){return this.counter+=1,`${this.baseId}-${this.counter}`}}var I=(t,e)=>({name:t,content:e}),Yr=(t,e)=>({property:t,content:e}),Rr=(t,e)=>({"http-equiv":t,content:e});class Pt{tags=[];constructor(t){if(t)this.tags.push(I("description",t))}author(t){return this.tags.push(I("author",t)),this}charset(t){return this.tags.push({charset:t}),this}keywords(...t){if(t.length>0)this.tags.push(I("keywords",t.join(", ")));return this}viewport(t){let e=g(t).map(([r,s])=>`${Y(r)}=${String(s)}`);if(e.length)this.tags.push(I("viewport",e.join(", ")));return this}httpEquiv(t){return g(t).forEach(([e,r])=>{this.tags.push(Rr(Y(e),String(r)))}),this}robots(...t){if(t.length)this.tags.push(I("robots",t.join(", ")));return this}themeColor(t){return this.tags.push(I("theme-color",t)),this}openGraph(t){return g(t).forEach(([e,r])=>{this.tags.push(Yr(`og:${e}`,String(r)))}),this}twitter(t){return g(t).forEach(([e,r])=>{this.tags.push(I(`twitter:${e}`,String(r)))}),this}extend(t){return this.tags.push(...t),this}toArray(){return this.tags}}class Ot{}var Er=["charset","name","property","http-equiv"],gt=(t,e,r)=>{if(e)h(t,{x:!0});else if(!("x"in t))h(t,r)},Xe=(t,e,r=!1,s={})=>{e.forEach((i)=>{for(let a of Er){if(!(a in i))continue;let n=a==="charset"?"charset_":`${a}_${i[a]}`;gt(i,r,s),t[n]=i}})},Pr=(t,e,r=!1,s={})=>{e.forEach((i)=>{if(!("href"in i))return;gt(i,r,s),t[i.href]=i})};class ve{_head;idm;mark;push;constructor({initial:t,mark:e=!1,push:r={}}={}){this._head=new m(t),this.mark=e,this.push=r}handleTitleBase(t,e){if(e===void 0)return;if(t==="base"&&Array.isArray(e)&&e[0]){let r=e[0];gt(r,this.mark,this.push)}this._head.set(t,e)}handleMeta(t){let e=this._head.init("meta",{});if(t instanceof Pt)Xe(e,t.tags,this.mark,this.push);else if(Array.isArray(t))Xe(e,t,this.mark,this.push)}handleLink(t){if(!Array.isArray(t))return;Pr(this._head.init("link",{}),t,this.mark,this.push)}handleScript(t){if(!Array.isArray(t)||!t.length)return;this._head.init("script",[]);let e=t.map((r)=>{if(!r.yid&&this.idm)r.yid="sc"+this.idm.nextId;return gt(r,this.mark,this.push),r});this._head.get("script").push(...e)}set head(t){g(t).forEach(([e,r])=>{if(e==="title"||e==="base"){this.handleTitleBase(e,r);return}if(e==="meta"){this.handleMeta(r);return}if(e==="link"){this.handleLink(r);return}if(e==="script"){this.handleScript(r);return}})}get head(){return this._head}set id(t){this.idm=new j(t)}}var ze=(t)=>g(t??{}).reduce((e,[r,s])=>{return e.push(W(s)&&s?r:`${r}="${s}"`),e},[""]).join(" "),Or=(t)=>{let e={...t},r="";if("importmap"in e)e.type="importmap",r=JSON.stringify(e.importmap),delete e.importmap;else if("body"in e)r=e.body,delete e.body;return`<script${ze(e)}>${r}</script>`},Ve=(t,e)=>`<${t}${ze(e)}>`,tr=(t)=>{if(!t)return"";let e=new Set,r=new Set,s=[...t];for(let[i,a]of s){let n=a;if(i==="meta"||i==="link")n=R(n);if(F(n)){let u=`<${i}>${n}</${i}>`;if(i==="title")e.add(u);else r.add(u);continue}if(!l(n))continue;if(i==="base"){let u=n.at(-1);if(u)e.add(Ve("base",u));continue}let o=n.map((u)=>{if(i==="script")return Or(u);return Ve(i,u)});for(let u of o)if(u.includes('type="module"')||u.startsWith("<meta"))e.add(u);else r.add(u)}return[...e,...r].join("")};class rt{lang="en";htmlHead;head;constructor({mark:t=!1,push:e={}}={}){this.htmlHead=new m,this.head=(r={})=>{let s=new ve({initial:this.htmlHead,mark:t,push:e}),{link:i,script:a,meta:n,title:o,description:u,css:c,js:d,base:S}=r;if(u)s.head={meta:[{name:"description",content:u}]};if(Nr(s,{css:c,js:d}),S)s.head={base:S};s.head={script:a,title:o,meta:n,link:i},this.htmlHead=s.head}}}var Nr=(t,e)=>{let{css:r,js:s}=e,i=(o)=>o===void 0?[]:Array.isArray(o)?o:[o],a=i(r);if(a.length){let o=a.map((u)=>({rel:"preload stylesheet",href:u,as:"style"}));t.head={link:o}}let n=i(s);if(n.length){let o=n.map((u)=>({src:u}));t.head={script:o}}};var er=(t,e)=>{return g(e).forEach(([r,s])=>{if(s==null)return;t.setAttribute(r,String(s))}),t},Nt=async(t)=>{if(y)return;return new Promise((e,r)=>{let s=document.createElement("link"),i={...t,rel:"stylesheet",as:t.as??"style"};er(s,i),s.onload=()=>e(s),s.onerror=()=>r(Error("Failed to load CSS")),document.head.appendChild(s)})};var rr=(t)=>{if(y)return Promise.resolve(void 0);return new Promise((e,r)=>{let s=document.createElement("script"),i={...t},a="";if("importmap"in i)i.type=i.type??"importmap",a=JSON.stringify(i.importmap),delete i.importmap;else if("body"in i)a=String(i.body),delete i.body;if(a)s.textContent=a;er(s,i),s.onload=()=>e(s),s.onerror=()=>r(Error("Failed to load script")),document.head.appendChild(s)})};async function K(t,e,{id:r="stateHook",init:s}={}){let i=[],a=()=>e.map((o)=>o.value),n=async()=>{await t(...a())};if(e.forEach((o)=>{i.push(o.hook(n)(r))}),s)await n();return()=>{i.forEach((o)=>o())}}var sr=(t)=>{t.forEach((e)=>e())};var kr=(t,e)=>{for(let[r,s]of t){let i=Q(r);if(!i){t.delete(r);continue}s.forEach((a)=>{a.call(i,e)})}};class E extends EventTarget{options;deep;verify;hooks=new m;states=new m;_value;listening=!1;end;constructor(t,e={},r=!0,s=!0){super();this.options=e;this.deep=r;this.verify=s;this._value=t}get value(){return this._value}set value(t){if(!this.verify){this._value=t,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(!this.deep){if(this._value===t)return;this._value=t,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if($(this._value)||l(this._value)){let e=tt(this._value,t);if(!mt(e))return}else if(this._value instanceof Set){if(!Tt(this._value,t))return}else if(this._value===t)return;this._value=t,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}))}get listen(){let t=(e)=>{if(sr(this.hooks),kr(this.states,e.detail),!this.states.size&&!this.hooks.size)this.end?.()};if(!this.listening)this.addEventListener("updated",t,this.options),this.listening=!0;return()=>{this.listening&&this.removeEventListener("updated",t,this.options),this.end=void 0,this.listening=!1}}call(t,e){return(r)=>{if(z(r,this.states).set(e,t),!y&&!this.listening)this.end=this.listen;return()=>{if(this.states.has(r))this.states.get(r)?.delete(e)}}}hook(t){return(e)=>{if(this.hooks.set(e,t),!y&&!this.listening)this.end=this.listen;return()=>{if(this.hooks.has(e))this.hooks.delete(e)}}}}function H(t,e={}){return new E(t,e,!0)}function Fr(t,e=!1){return new E(t,{},!1,e)}class kt{e;opt;constructor(t){this.e=t;this.opt={duration:500,easing:"ease-in-out",fill:"forwards"}}animate(t,e={}){return this.e.animate(t,e)}get slide(){let t=({x:e=0,y:r=0},s={})=>{h(this.opt,s);let i=[[e,r],[0,0]].map(([a,n])=>({transform:`translateX(${a}rem) translateY(${n}rem)`}));return this.e.animate(i,this.opt),this};return{left:(e={})=>{return t({x:-2},e)},right:(e={})=>{return t({x:2},e)},up:(e={})=>{return t({y:2},e)},down:(e={})=>{return t({y:-2},e)}}}fade(t={}){h(this.opt,t);let e=[0,1].map((r)=>({opacity:r}));return this.e.animate(e,this.opt),this}shake(t="Y",e={}){h(this.opt,e);let r=[0,5,-5,5,0].map((s)=>({transform:`translate${t}(${s}px)`}));return this.e.animate(r,this.opt),this}color(t=[],e={}){h(this.opt,e);let r=Array.isArray(t)?t.map((s)=>({color:s})):{color:t};return this.e.animate(r,this.opt),this}bg(t=[],e={}){h(this.opt,e);let r=Array.isArray(t)?t.map((s)=>({backgroundColor:s})):{backgroundColor:t};return this.e.animate(r,this.opt),this}bounce(t=1,e={}){h(this.opt,e);let r=[0.5,t,1].map((s)=>({transform:`scale(${s})`}));return this.e.animate(r),this}}var st=(t)=>{if(l(t))return t.filter((e)=>e!==void 0).join(" ");else if(A(t)){if($(t))return T(t)}else if(p(t))return st(t());else if(t!==void 0&&t!==null)return W(t)?t?"":"false":String(t);return""};function Lr(t,e){switch(e??t){case"style":return function(r){this.style.setProperty(t,r)};default:return function(r){this.setAttribute(t,r)}}}class Ft{attr;constructor(t={}){this.attr=t}get(t,e=this.attr,r){let s=(i,a)=>{if(l(a))t.attr_push(i,st(a),r);else if(a instanceof E){let n=r?`${r}_${i}`:i;t.states.push(a.call(Lr(i,r),n)),s(i,a.value)}else if(A(a)){if($(a)&&!r)this.get(t,a,i)}else t.attr_push(i,st(a),r)};g(e).forEach(([i,a])=>{let n=String(i);if(n==="ref"){if(a instanceof it)t.events.obj({element(){a.element=this}})}else if(["on"].includes(n))A(e.on)&&t.events.obj(e.on);else{if(a===void 0)return;s(n,a)}})}unload(t){let e=void 0;if(t in this.attr)e=this.attr[t],delete this.attr[t];return e}}var Cr=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Ur=(t)=>Cr.includes(t);function Ir(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var dt=async(t,e)=>{if(t=await Promise.resolve(t),l(t)){let r=[];for(let s of t)r.push(await dt(s,e));return r.join("")}else if(t instanceof _){let{ctx:r,oz:s}=await yt(t,e.IDM);return e.OZ.push(s),r}else if(A(t)){if(t instanceof Set)return[...t].join(" ");return T(t)}else if(p(t))return await dt(t(),e);else if(t!==void 0&&t!==null)return Ir(t);return""},pt=async(t,e)=>{let r=new j(e),s=new at(r.id,r);return{ctx:await dt(t,s),catt:s}};async function _r(t){let e=this.id;if(e){let{ctx:r,catt:s}=await pt(t,e);if(this.innerHTML!==r)this.innerHTML=r,k.RPS(s.OZ)}}var Lt=async(t,e,r,s=[])=>{if(l(t))for(let i of t)await Lt(i,t.length,r,s);else if(t instanceof E)if(e>1)await Lt(await b("div",{},t),e,r,s);else{let i=t.value,a=i instanceof _?"dom":"ctx",{ctx:n,catt:o}=await pt(i,r.xid+"-0");r.xid=o.xid,s.push(n),r.OZ.push(o.OZ),r.states.push(t.call(_r,a))}else s.push(await dt(t,r))};class Ct{tag;ctx;closing;constructor(t="",e){this.tag=t;this.ctx=e;let r=Ur(t);this.closing=r?"":`</${t}>`}async process(t,e=this.ctx,r=[]){for(let s of e)await Lt(await Promise.resolve(s),e.length,t,r);return r.join("")}async get(t){let e=await this.process(t);if(!this.tag)return e;if(t.events.size||t.states.length)t.id=t.xid;return`<${this.tag}${t.attr}>${e}${this.closing}`}}class _t{e;_query;_parent;constructor(t,e){this.e=t;this._query=e}get a(){return new kt(this)}get all(){if(this._query){let t=document.querySelectorAll(this._query);if(t.length)return Array.from(t).map((e)=>e)}return[]}get attr(){let t=this.e;return{has:(e)=>{return t.hasAttribute(e)},get:(e)=>{return t.getAttribute(e)},del:(e)=>{return t.removeAttribute(e),this},set:(e)=>{for(let r in e){let s=e[r];if(e[r]!==void 0)t.setAttribute(r,st(s))}return this}}}get children(){return Array.from(this.e.children).map((t)=>w(t))}get click(){return this.e.click(),this}get delete(){return this.e.remove(),this}get disabled(){return this.e.disabled??!1}get focus(){return this.e.focus(),this}get href(){return this.e?.href??""}get id(){return this.e.id}get inner(){return this.e.innerHTML}get offsetParent(){let t=this.e.offsetParent;if(t)return new P(t);return}get parent(){let t=this.e.parentElement;if(t)return new P(t);return}get hash(){return this.e?.hash??""}get path(){return this.e?.pathname??""}get rect(){return this.e.getBoundingClientRect()}get remove_element(){return this.e.remove(),this}get style(){let t=this.e.style,e=this;return{set:(r,s=0)=>{let i=t,a=()=>{g(r).forEach(([n,o])=>{if(n in i){if(i[n]!==o)i[n]=o}else if(o!==null)t.setProperty(n,String(o))})};if(p(s))e.on("transitionend",s);if(D(s))setTimeout(a,s);else a();return e},get:(r)=>{let s=Y(String(r));return t.getPropertyValue(s)},del:(...r)=>{return r.forEach((s)=>{let i=Y(String(s));t.removeProperty(i)}),e}}}get submit(){let t=this.e;if("submit"in t)return t.submit();return!1}get tag(){return this.e.tagName.toLowerCase()}get value(){return this.e.value??""}get unload(){return()=>{this.e.remove()}}set append(t){Ut(t,It(this.id)).then((e)=>{let{ctx:r,catt:s}=e;this.e.insertAdjacentHTML("beforeend",r),k.RPS(s.OZ)})}set appendfirst(t){Ut(t,It(this.id)).then((e)=>{let{ctx:r,catt:s}=e;this.e.insertAdjacentHTML("afterbegin",r),k.RPS(s.OZ)})}set inner(t){Ut(t,It(this.id)).then((e)=>{let{ctx:r,catt:s}=e;this.e.innerHTML=r,k.RPS(s.OZ)})}set disabled(t){let e=this.e;if("disabled"in e)e.disabled=t}set id(t){this.e.id=t}set value(t){let e=this.e;e.value=t}}var Ut=(t,e)=>{return pt(t,e)},It=(t)=>t?`${t}-0`:t;class P extends _t{add(...t){return this.e.classList.add(...t.map((e)=>e.replace(/[^\w-]/,""))),()=>{this.e.classList.remove(...t.map((e)=>e.replace(/[^\w-]/,"")))}}remove(...t){return this.e.classList.remove(...t.map((e)=>e.replace(/[^\w-]/,""))),this}toggle(t,e){let r=typeof t!="string"?t.apply(this):t;return this.e.classList.toggle(r,e)}hasNode(t){return this.e.contains(t)}has(...t){let e=this.e.classList;return t.every((r)=>e.contains(r))}insert(t){return{HTML:(...e)=>{return e.forEach((r)=>{this.e.insertAdjacentHTML(t,r)}),this},element:(...e)=>{return e.forEach((r)=>{this.e.insertAdjacentElement(t,r)}),this},text:function(...e){return e.forEach((r)=>{this.e.insertAdjacentText(t,r)}),this}}}is(t){let e=this.e.classList,r=this.e.tagName.toLocaleLowerCase(),s=!0,i=!0;if(t.dom)i=t.dom==r?!0:!1;if(t.class)if(Array.isArray(t.class))t.class.forEach((a)=>{s=s?e.contains(a):!1});else s=s?e.contains(t.class):!1;return s&&i}on(t,e,r=!1){let s=!1;if(t.indexOf("touch")>-1)s=!0;return this.e.addEventListener(t,e,{capture:r,passive:s}),this}remove_on(t,e,r=!1){return this.e.removeEventListener(t,e,r),this}timed(t,e=250){return setTimeout(()=>t(this),e),this}animate(t,e,r){let s={duration:300,easing:"ease",fill:"forwards"};if(p(e))r=e;else h(s,e);let i=this.e.animate(t,s);if(r)i.finished.then(r);return this}query(t){return this.e.querySelector(t)}queryAll(t){let e=this.e.querySelectorAll(t);if(e.length)return Array.from(e).map((r)=>r);return[]}newChild(t,e={}){let r=document.createElement(t);return this.e.appendChild(r),Object.assign(r,structuredClone(e)),new P(r)}newChildNS(t,e={}){let r=document.createElementNS("http://www.w3.org/2000/svg",t);return this.e.appendChild(r),Object.assign(r,structuredClone(e)),new P(r)}get(t){return this.e[t]}}var nt=new m,Q=(t)=>{if(y)return;let e=nt.get(t);if(e?.isConnected)return e;nt.delete(t);let r=document.getElementById(t);if(!r)return;return nt.set(t,r),r};function ir(){let t=[];for(let[e,r]of nt)if(!r.isConnected)t.push(e),nt.delete(e);return t}function w(t,e){if(y)return;let r=e??document,s=(i)=>{let a=r.querySelector(i);return a?new P(a,i):void 0};if(F(t))return s(t);if($(t)){let[i,a]=g(t)[0];return s(`${i==="id"?"#":"."}${a}`)}return new P(t)}class it{state=new E(void 0);get element(){return this.state.value?.e}set element(t){if(t)this.state.value=new P(t);else this.state.value=void 0}get $(){return this.state.value}}var Br=()=>{return new it};var Wr=(t,e,r)=>{return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}},ot={};class bt{events=new m;states=new m;windowEvents=new m;resetST=new m;resetEV=new m;get keys(){return[...new Set([...this.states.keys(),...this.events.keys()])]}set(t){let{id:e,events:r,states:s}=t;if(e){if(r.size)this.events.set(e,r);if(s.length)this.states.set(e,s)}return this}push(t){return t.events.forEach((e,r)=>{e.forEach((s,i)=>{z(r,this.events).set(i,s)})}),t.states.forEach((e,r)=>{J(r,this.states).push(...e)}),this}get stage(){return this.events.forEach((t,e)=>{this.events.delete(e);let r=Q(e);if(!r){this.events.delete(e);return}t.forEach((s,i)=>{switch(i){case"ready":case"element":s.apply(r,[r]);break;case"resize":case"beforeunload":case"popstate":case"winscroll":case"winload":case"winfocus":case"winblur":let a=i.replace(/^win/,"");this.windowEvents.init(a,new m).set(e,s);break;case"state":let[n,o,u]=s.apply(r,[r]),c=l(o)?o:[o];if(!c.length)break;let d=()=>c.map((V)=>V.value),S=()=>n(...d());if(u)S();c.forEach((V)=>J(e,this.resetST).push(V.call(S,e+"_state")(e)));break;default:J(e,this.resetEV).push(Wr(r,i,s))}})}),this.processWindowEvents,this.states.forEach((t,e)=>{this.states.delete(e),t.forEach((r)=>{J(e,this.resetST).push(r(e))})}),this}get processWindowEvents(){let t=(e,r)=>{let s=0,i=!1,a=(o)=>{if(s=window.scrollY,!i)window.requestAnimationFrame(()=>{r.forEach((u,c)=>{let d=Q(c);if(d)u.call(d,o);else this.windowEvents.get(e)?.delete(c)}),i=!1}),i=!0},n=(o)=>{r.forEach((u,c)=>{let d=Q(c);if(d)u.call(d,o);else this.windowEvents.get(e)?.delete(c)})};return window.addEventListener(e,e==="scroll"?a:n),()=>{window.removeEventListener(e,e==="scroll"?a:n)}};return this.windowEvents.forEach((e,r)=>{if(e.size){if(!ot[r])ot[r]=t(r,e)}else if(ot[r])ot[r](),delete ot[r]}),this}reset(t){return t.forEach((e)=>{this.windowEvents.forEach((r,s)=>{if(r.has(e))r.delete(e)}),this.resetEV.get(e)?.forEach((r)=>{r()}),this.resetST.get(e)?.forEach((r)=>{r()}),this.resetST.delete(e),this.resetEV.delete(e)}),this}RPS(t){if(t){let e=ir();this.reset(e);let r=t.keys;if(r.length)this.reset(r).push(t).stage}return this}}var k=new bt;class at{xid;IDM;map=new m;states=[];events=new m;OZ;constructor(t,e=new j,r){this.xid=t;this.IDM=e;this.OZ=r??new bt}attr_push(t,e,r){let s=r??t;if(!this.map.has(s))this.map.set(s,[]);let i=r?`${Y(t)}:${e};`:e;this.map.get(s).push(i)}get attr(){let t=[""];return this.map.forEach((e,r)=>{let s=e.join("");t.push(s?`${r}="${s}"`:r)}),t.join(" ")}set id(t){if(!this.map.has("id"))this.map.set("id",[t])}get id(){return this.map.get("id")?.join("")}}async function ar(t,e){return await yt(t,new j(e))}async function yt(t,e=new j){let{tag:r,attr:s,ctx:i}=await Promise.resolve(t),a=e instanceof j?e:new j(e),n=a.nextId,o=new at(n,a),u=new Ft(s),c=new Ct(r,i);return u.get(o),{ctx:await c.get(o),oz:o.OZ.set(o),id:o.id}}class _{tag;attr;ctx;constructor(t,e,r){this.tag=t;this.attr=e;this.ctx=r}}async function b(t,e={},...r){if(p(t))return await t(e??{},...r);return new _(t,e??{},r)}var Zr=async(t,...e)=>new _("",{},e);async function nr(t={},e){let r=w("link[rt]")?.all.map((s)=>()=>s.remove())||[];if(t&&O(t))for(let s of R(t)){if(s.x)continue;try{await Nt(s)}catch(i){U.e=["link error",{error:"Huntr @ link"}]}}return r}var qr=["charset","name","property","http-equiv"];async function or(t){let e={};if(w("meta")?.all.forEach((r)=>{let s=r.attributes;for(let i of qr)if(i in s){let a=s[i].value;e[`${i}_${i==="charset"?"":a}`]=r}}),t)g(t).forEach(([r,s])=>{if(r in e)w(e[r]).attr.set(s),delete e[r];else{let i=w(document.createElement("meta"));i.attr.set(s),document.head.append(i.e)}});return R(e).map((r)=>w(r).unload)}async function ur(t,e=!1){let r=w("script[rt]")?.all.map((s)=>()=>s.remove())||[];if(t&&O(t))for(let s of R(t)){if(s.x)continue;try{await rr(s)}catch(i){U.e=["script error",{error:"Huntr @ script"}]}}return r}class ut extends Ot{path="";data={};args={};importArgs=[];static A=(t,...e)=>{return b("a",t||{},...e)}}async function fr(t,e=!1){if(!e&&t.fetch)h(t.data,await t.fetch());return[await Wt(await t.body?.(),t.importArgs),Jr.call(this,t)]}async function Wt(t,e=[]){let r=t||"";if(ht(t)){let s=t.default,i=p(e)?e():e;r=p(s)?await s.apply({},i):s}return l(r)?r:[r]}function Jr(t){let e=new rt({push:{rt:this.id}});return e.htmlHead=structuredClone(this.htmlHead),e.head(t),e.htmlHead}async function lr(t,e){document.title=t.get("title")||"",Bt(await nr(t.get("link"),e)),Bt(await ur(t.get("script")));let r=await or(t.get("meta"));Bt(r)}var Bt=(t)=>{t.forEach((e)=>e())};class wt{onChange;popListener;constructor(t=H(""),e=!1,r){if(this.onChange=r,this.onChange?.(this.path(),history.state??{path:this.path()}),this.popListener=(s)=>{let i=s.state??{path:this.path()},a=i?.path;if(e&&a)a=a==="/"?a:a.replace(/\/+$/g,"");t.value=a||t.value,this.onChange?.(this.path(),i)},q)window.addEventListener("popstate",this.popListener)}path(){let{pathname:t,search:e,hash:r}=window.location;return`${t}${e}${r}`}state(){return window.history.state??{path:this.path()}}navigate(t,e,r=""){let s=this.resolve(t),i=this.path();if(this.samePath(i,s))return;let a={...e,path:s};window.history.pushState(a,r,s),this.onChange?.(this.path(),a)}replace(t,e,r=""){let s=this.resolve(t),i=this.path();if(this.samePath(i,s))return;let a={...e,path:s};window.history.replaceState(a,r,s),this.onChange?.(this.path(),a)}back(){window.history.back()}forward(){window.history.forward()}destroy(){if(this.popListener)window.removeEventListener("popstate",this.popListener),this.popListener=void 0}resolve(t){let e=new URL(t,window.location.origin);return`${e.pathname}${e.search}${e.hash}`}samePath(t,e){return t===e}}class Zt{lang;head="";constructor(t,e){if(this.lang=t,e)this.head=tr(e)}body(t,e,r){return[`<!DOCTYPE html><html lang="${this.lang}">`,`<head>${this.head}</head>`,`<body id="${e}"${r?" "+r:""}>${t}</body>`,"</html>"].join("")}}class ft{path="";data={};args={};importArgs=[];static Button=(t,...e)=>{return b("button",t||{},...e)}}class xt extends Rt{cls;constructor(t,e){super(t);this.cls=e}}class Mt extends xt{}class hr extends xt{}class qt{storage=new et;error=new et}class Jt extends qt{wss=new et;setRoute(t,e){this.storage.set(new Mt(t,e))}getRoute(t,e){let[r,s]=this.storage.get(t);if(!r){let[a=new Mt(t,mr)]=this.getError(e),n=new a.cls;return n.args=s,h(n,{args:s})}let i=new r.cls;return h(i,{args:s})}setWss(t,e){this.wss.set(new hr(t,e))}getWss(t){return this.wss.get(t)}setError(t,e){this.error.set(new Mt(t.toString(),e))}getError(t=404){return this.error.get(t.toString())}}class St extends xt{}class Gt extends qt{setRoute(t,e){this.storage.set(new St(t,e))}getRoute(t,e){let[r,s]=this.storage.get(t);if(!r){let[a=new St(t,cr)]=this.getError(e),n=new a.cls;return n.args=s,h(n,{args:s})}let i=new r.cls;return h(i,{args:s})}setWss(t){}getWss(t){}setError(t,e){this.error.set(new St(t.toString(),e))}getError(t=404){return this.error.get(t.toString())}}class mr extends ut{body(){return b("div",{},this.path+" not found...")}}class cr extends ft{body(){return b("div",{},`${this.path} not found...`)}}class Kt extends rt{id;data;path;_root;constructor(){super({mark:!0});this.id=N(6),this.path=H("/"),this._root=H([]),this.data={}}A(t,...e){let{on:r,...s}=t,i=this.path,a={...r||{},click(n){n.preventDefault();let o=w(this).path;i.value=o}};return b("a",{on:a,...s},...e)}_main;async getMain(t){return await b("main",{...t&&{class:t}},await this._main?.(this._root)||this._root)}}x([M,f("design:type",Function),f("design:paramtypes",[typeof aAttr==="undefined"?Object:aAttr,Object]),f("design:returntype",void 0)],Kt.prototype,"A",null);class Qt extends Kt{pushHistory;storage=new Jt;base;constructor(t="/",e="",r=!1){super();this.pushHistory=r;this.base=t?t.startsWith("/")?t:`/${t}`:"";let s=this.base;this.head({script:[{type:"module",src:"./index.js"}],...{base:[{href:s==="/"?s:`${s}/`,target:"_blank"}]},meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"}]})}route(t){return(e)=>{return e.A=(r,...s)=>{if(r.href&&l(r.href))r.href=Xt(t,r.href);else if(!r.href)r.href=t;return this.A(r,...s)},this.storage.setRoute(t,e),e}}error(...t){return(e)=>{if(t.length)t.forEach((r)=>{this.storage.setError(r,e)});return e}}wss(t){return(e)=>{return this.storage.setWss(t,e),e}}}x([M,f("design:type",Function),f("design:paramtypes",[String]),f("design:returntype",void 0)],Qt.prototype,"route",null),x([M,f("design:type",Function),f("design:paramtypes",[Object]),f("design:returntype",void 0)],Qt.prototype,"error",null),x([M,f("design:type",Function),f("design:paramtypes",[String]),f("design:returntype",void 0)],Qt.prototype,"wss",null);function Xt(t,e){let r=0;return t.replace(/<[^>]+>/g,()=>e[r++])}class gr{id=N(5);path=H("");_root=H([]);Button(t,...e){let r=this.path,{on:s,...i}=t,a={...s||{},click(n){n.preventDefault();let u=w(this).attr.get("tab");if(!u)return;r.value=u}};return b("button",{on:a,...i},...e)}}x([M,f("design:type",Function),f("design:paramtypes",[Object,Object]),f("design:returntype",void 0)],gr.prototype,"Button",null);class Vt extends gr{storage=new Gt;hasLoaded=!1;constructor({path:t}={}){super();if(t)this.path=t}tab(t){return(e)=>{return e.Button=(r,...s)=>{if(r.tab&&l(r.tab))r.tab=Xt(t,r.tab);else if(!r.tab)r.tab=t;return this.Button(r,...s)},this.storage.setRoute(t,e),e}}Main(t){let{tab:e,data:r={},...s}=t;if(e)this.load(e,r);return b("main",{...s},this._root)}async load(t,e={}){this.path.value=this.path.value||t,await K(async(r)=>{this._root.value=await Gr.call(this,r,e)},[this.path],{id:this.id,init:!0})}}x([M,f("design:type",Function),f("design:paramtypes",[String]),f("design:returntype",void 0)],Vt.prototype,"tab",null),x([M,f("design:type",Function),f("design:paramtypes",[Object]),f("design:returntype",void 0)],Vt.prototype,"Main",null),x([M,f("design:type",Function),f("design:paramtypes",[String,typeof obj==="undefined"?Object:obj]),f("design:returntype",Promise)],Vt.prototype,"load",null);async function Gr(t,e={},r){let s=this.storage.getRoute(t,r);return h(s,{path:t,data:e}),Wt(await s.body?.(),s.importArgs)}class vt{path;args;route="/";isConnected=H(!1);data={};constructor(t,e={}){this.path=t;this.args=e;this.data=e}open(t){}message(t){}close(t){}error(t){}get connect(){if(this.ws&&this.ws.readyState<=1)return this;return this.ws=new WebSocket(this.path),this.ws.onopen=async(t)=>{this.isConnected.value=!0,await this.open.call(this,t)},this.ws.onmessage=async(t)=>{await this.message.call(this,t)},this.ws.onclose=async(t)=>{this.isConnected.value=!1,await this.close.call(this,t)},this.ws.onerror=async(t)=>{this.isConnected.value=this.ws.readyState<=1,await this.error.call(this,t)},this}get reconnect(){if(this.state>=2)this.connect;return this}get disconnect(){if(this.state<=1)this.ws.close();return this}get state(){return this.ws?.readyState??3}set send(t){if(this.isConnected.value)this.ws.send(t);else throw Error(`websocket path ${this.path} not connected`)}}var X=new m;class zt{yvee;constructor(t){this.yvee=t}async load(t){if(y)return;if(!X.has(t)){let[r,s]=this.yvee.storage.getWss(t);if(!r)return;let{cls:i,path:a}=r,n=new i(a,s).connect;return X.set(t,n),n}let e=X.get(t);return e.reconnect,e}unload(t){if(y)return;if(X.has(t)){let e=X.get(t);if(!e)return;e.disconnect,X.delete(t)}}}class pr extends Qt{isDev;history;constructor({base:t,history:e,index:r,isDev:s=!1}={}){super(t,r,e);let i=this;this.isDev=s,this.history=new wt(this.path,this.isDev),h(this,{get yvee(){return i}})}Main(t){this._main=t}async render(t={}){let{id:e,data:r,class:s}=t;if(q){let i=window.location.pathname;if(this.isDev)i=i.replace(/\/+$/g,"");this.path.value=i;let a=document.body.id;this.id=a;let[n,o]=await dr.call(this,this.path.value,s);return k.push(o.oz),requestAnimationFrame(()=>{k.stage,this.init(r)}),()=>{}}return async({path:i,data:a={},error:n=0})=>{if(e)this.id=e;this.path.value=i;let[o,u]=await dr.call(this,this.path.value,s,n,a,!0);return new Zt(this.lang,o).body(u.ctx,this.id)}}async init(t={}){let e=this.id;K(async(r)=>{let[s,i]=await yr.call(this,r,t);await lr(i,e),this._root.value=s,this.pushHistory&&this.history.navigate(r)},[this.path],{id:e})}}x([M,f("design:type",Function),f("design:paramtypes",[Function]),f("design:returntype",void 0)],pr.prototype,"Main",null),x([M,f("design:type",Function),f("design:paramtypes",[typeof renderConfig==="undefined"?Object:renderConfig]),f("design:returntype",Promise)],pr.prototype,"render",null);async function yr(t,e={},r=!1,s){let i=this.storage.getRoute(t,s);return h(i,{path:t,data:e}),await fr.call(this,i,r)}async function dr(t,e,r,s={},i=!1){let[a,n]=await yr.call(this,t,s,i,r);this._root.value=a;let o=await this.getMain(e),u=await ar(await this.getMain(e),this.id);return[n,u]}var Kr=(t)=>{return(e)=>{return t(e)}};export{vt as websocket,Br as useRef,Dr as upsertCSS,zt as socket,yt as renderDom,U as log,Zr as frag,b as dom,ut as doc,Nt as cssLoader,ft as content,M as bind,Yt as __,pr as Yvee,ct as Time,Vt as Tabs,E as Stateful,K as StateHook,H as State,Kr as Routes,it as Ref,Fr as QState,wt as PathHistory,Pt as MetaBuilder,Sr as IfClient,_ as DOM,w as $};
