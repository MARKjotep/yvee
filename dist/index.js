var Mn=Object.defineProperty;var Xn=(o,n)=>{for(var i in n)Mn(o,i,{get:n[i],enumerable:!0,configurable:!0,set:(t)=>n[i]=()=>t})};var B=function(o,n,i,t){var r=arguments.length,f=r<3?n:t===null?t=Object.getOwnPropertyDescriptor(n,i):t,m;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")f=Reflect.decorate(o,n,i,t);else for(var u=o.length-1;u>=0;u--)if(m=o[u])f=(r<3?m(f):r>3?m(n,i,f):m(n,i))||f;return r>3&&f&&Object.defineProperty(n,i,f),f};var g=(o,n)=>{if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(o,n)};var Zo={};Xn(Zo,{isWindow:()=>c,isUndefined:()=>Wn,isStr:()=>p,isPromise:()=>Jn,isPlainObject:()=>j,isObject:()=>Fn,isObj:()=>R,isNumber:()=>_,isNum:()=>Uo,isNull:()=>fo,isNotWindow:()=>U,isNotNull:()=>En,isModule:()=>Lo,isInt:()=>Bo,isFN:()=>L,isDefined:()=>Sn,isClassOrId:()=>jn,isBool:()=>N,isAsync:()=>qn,isArraybuff:()=>Qn,isArr:()=>b});var L=(o)=>typeof o==="function",qn=(o)=>o.constructor.name==="AsyncFunction",Jn=(o)=>!!o&&typeof o.then==="function",_=(o)=>{return!isNaN(parseFloat(o))&&isFinite(o)},Fn=(o)=>{return o&&typeof o==="object"&&!Array.isArray(o)},j=(o)=>{return typeof o==="object"&&o!==null&&Object.getPrototypeOf(o)===Object.prototype&&!Array.isArray(o)},Lo=(o)=>{return o&&typeof o==="object"&&o[Symbol.toStringTag]==="Module"},Qn=(o)=>{return o instanceof Uint8Array||o instanceof ArrayBuffer||typeof o==="string"},jn=(o)=>{return o.startsWith(".")||o.startsWith("#")},N=(o)=>typeof o==="boolean",p=(o)=>typeof o==="string",b=(o)=>Array.isArray(o),R=(o)=>typeof o==="object",Uo=(o)=>typeof o==="number",fo=(o)=>o===null,En=(o)=>o===null,Wn=(o)=>typeof o==="undefined",Sn=(o)=>typeof o!=="undefined",Bo=(o)=>{return Number.isInteger(Number(o))},c=typeof window!=="undefined",U=typeof window==="undefined";var zn=(o)=>{if(U)return;return o()};function lo(o,n){$(n).forEach(([i,t])=>{ao(o,i,{value:t,writable:!1,configurable:!1,enumerable:!0})})}var Ao=(o)=>{return b(o)?o:[o]};class I{static set i(o){console.info(...Ao(o))}static set e(o){console.error(...Ao(o))}static set w(o){console.warn(...Ao(o))}}class A{_c=0;_id="";constructor(o){if(this._c=0,this._id=o??E(5),o?.includes("-")){let[n,i]=[o.split("-").slice(0,-1).join("-"),o.split("-").slice(-1)[0]];this._id=n,this._c=_(i)?parseInt(i):0}}get id(){return this._id+"-"+this._c}get mid(){return this._id+"-"+ ++this._c}}var In=(o)=>Array.from({length:o},(n,i)=>i),ko="ABCDEFGHIJKLMNOPQRSTUVWXYZ",eo="abcdefghijklmnopqrstuvwxyz";var w=(o)=>JSON.stringify(o),vo=(o)=>{return JSON.parse(o)};var X=(o)=>{if(o.startsWith("webkit"))o="-"+o;return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},E=(o)=>{let n=ko+eo,i=In(10).join("");return Array.from({length:o},(t,r)=>n+(r?i:"")).reduce((t,r)=>{return t+=r.charAt(Math.floor(Math.random()*r.length))},"")},Kn=(o=6,n)=>{if(!n)return Math.floor(Math.random()*o);return Math.round(Math.random()*(n-o)+o)},on=()=>{let o=[...ko,...eo],n=Kn(0,o.length);return o[n]};class y extends Map{obj(o){o&&$(o).forEach(([n,i])=>this.set(n,i))}map(o){o.forEach((n,i)=>{if(n instanceof y)this.set(i,n);else if(b(n)){if(this.lacks(i))this.set(i,[]);this.get(i).push(...n)}else if(R(n))this.ass(i,n);else this.set(i,n)})}ass(o,n){if(!this.has(o))this.set(o,{});T(this.get(o),n)}lacks(o){return!this.has(o)}init(o,n){return this.has(o)?this.get(o):this.set(o,n).get(o)}}var{values:G,keys:K,entries:$}=Object;var{defineProperty:ao,assign:T}=Object,nn=(o,n)=>Object.hasOwn(o,n),W=(o)=>{return Object.keys(o).length},uo=(o,n)=>{if(!n.has(o))n.set(o,new y);return n.get(o)},l=(o,n)=>{if(!n.has(o))n.set(o,[]);return n.get(o)},d=(o,n)=>{let i={added:{},removed:{},modified:{}},t=K(o),r=K(n);for(let f of r){let m=o[f],u=n[f];if(!(f in o))i.added[f]=u;else if(b(m)&&b(u)){if(w(m)!==w(u))i.modified[f]={old:m,new:u}}else if(R(m)&&R(u)&&!fo(m)&&!fo(u)){let x=d(m,u);if(W(x.added)||W(x.removed)||W(x.modified))i.modified[f]={old:m,new:u}}else if(m!==u)i.modified[f]={old:m,new:u}}for(let f of t)if(!(f in n))i.removed[f]=o[f];return i};function tn(o,n){if(o.size!==n.size)return!1;for(let i of o)if(!n.has(i))return!1;return!0}var mo=(o)=>{return G(o).some((n)=>{return W(n)})};var Z=(o,n,i)=>{let t=i.value;return{configurable:!0,get(){if(this===o.constructor.prototype)return t;let r=t.bind(this);return Object.defineProperty(this,n,{value:r,configurable:!0,writable:!0}),r}}};var z=(o,n)=>{return{name:o,content:n}},sn=(o,n)=>{return{property:o,content:n}},Cn=(o,n)=>{return{"http-equiv":o,content:n}};class a{metas=[];constructor(o){o&&this.metas.push(z("description",o))}author(o){return this.meta=z("author",o),this}charset(o){return this.meta={charset:o},this}keywords(...o){return this.meta=z("keywords",o.join(", ")),this}viewport(o){let n=$(o).map(([i,t])=>[X(i),String(t)].join("="));return this.meta=z("viewport",n.join(", ")),this}httpEquiv(o){return $(o).forEach(([n,i])=>{this.meta=Cn(X(n),String(i))}),this}robots(...o){return this.meta=z("robots",o.join(", ")),this}themeColor(o){return this.meta=z("theme-color",o),this}openGraph(o){return $(o).forEach(([n,i])=>{this.meta=sn("og:"+n,String(i))}),this}twitter(o){return $(o).forEach(([n,i])=>{this.meta=z("twitter:"+n,String(i))}),this}push(o){this.metas.unshift(...o)}set meta(o){this.metas.push(o)}}class wo{}var Pn=["charset","name","property","http-equiv"],rn=(o,n,i=!1,t={})=>{n.forEach((r)=>{for(let f of Pn)if(f in r){let m=r[f];if(i)T(r,{x:!0});else if(!("x"in r))T(r,t);o[`${f}_${f==="charset"?"":m}`]=r}})},Vn=(o,n,i=!1,t={})=>{n.forEach((r)=>{if("href"in r){let f=r.href;if(i)T(r,{x:!0});else if(!("x"in r))T(r,t);o[`${f}`]=r}})};class fn{_head;idm;mark;push;constructor({initial:o,mark:n,push:i}={}){this._head=new y(o),this.mark=n||!1,this.push=i||{}}set head(o){$(o).forEach(([n,i])=>{if(n==="title"||n==="base"){if(i!==void 0){if(n=="base"){if(this.mark)T(i[0]||{},{x:!0})}this._head.set(n,i)}return}if(i instanceof a)return rn(this._head.init("meta",{}),i.metas,this.mark,this.push);if(!b(i))return;switch(n){case"meta":return rn(this._head.init("meta",{}),i,this.mark,this.push);case"link":return Vn(this._head.init("link",{}),i,this.mark,this.push);case"script":if(i.length){this._head.init(n,[]);let t=i.map((r)=>{if(!r.yid&&this.idm)r.yid="sc"+this.idm.mid;if(this.mark)T(r,{x:!0});else if(!("x"in r))T(r,this.push);return r});this._head.get(n).push(...t)}return}})}get head(){return this._head}set id(o){this.idm=new A(o)}}var Ro=(o)=>{return $(o??{}).reduce((n,[i,t])=>{return n.push(N(t)&&t?i:`${i}="${t}"`),n},[""]).join(" ")},un=(o)=>{let n=new Set;if(!o)return"";let i=[...o].reduce((t,[r,f])=>{if(r==="meta"||r==="link")f=G(f);if(p(f)){if(r==="title")n.add(`<${r}>${f}</${r}>`);else t.add(`<${r}>${f}</${r}>`);return t}if(!b(f))return t;if(r==="base"){let u=f.slice(-1);if(u)return n.add(`<${r}${Ro(u[0])}>`),t}return f.map((u)=>{if(r==="script"){let x={...u},h="";if("importmap"in x)x.type="importmap",h=JSON.stringify(x.importmap),delete x.importmap;else if("body"in x)h=x.body,delete x.body;return`<${r}${Ro(x)}>${h}</${r}>`}return`<${r}${Ro(u)}>`}).forEach((u)=>{if(u.includes('type="module"'))n.add(u);else if(u.includes("<meta"))n.add(u);else t.add(u)}),t},new Set);return[...n,...i].join("")};class k{lang="en";htmlHead;head;constructor({mark:o,push:n}={}){this.htmlHead=new y,this.head=(i={})=>{let t=new fn({initial:this.htmlHead,mark:o,push:n}),{link:r,script:f,meta:m,title:u,description:x,css:h,js:H}=i;if(x)t.head={meta:[{name:"description",content:x}]};if(On(t,{css:h,js:H}),"base"in i)t.head={base:i.base};t.head={script:f,title:u,meta:m,link:r},this.htmlHead=t.head}}}var On=(o,n)=>{let{css:i,js:t}=n;if(i){let f=(b(i)?i:[i]).map((m)=>({rel:"preload stylesheet",href:m,as:"style"}));o.head={link:[...f]}}if(t){let f=(b(t)?t:[t]).map((m)=>({src:m}));o.head={script:[...f]}}};var Go=async(o)=>{if(U)return;return new Promise((n,i)=>{let t=document.createElement("link");if(o.rel!=="stylesheet")o.rel="stylesheet",o.as="style";$(o).forEach(([r,f])=>{t.setAttribute(r,f)}),t.onload=()=>n(t),t.onerror=()=>i(new Error("Failed to load CSS")),document.head.appendChild(t)})};var mn=(o)=>{if(U)return;return new Promise((n,i)=>{let t=document.createElement("script"),r="";if("importmap"in o)o.type="importmap",r=JSON.stringify(o.importmap),delete o.importmap;else if("body"in o)r=o.body,delete o.body;if(r)t.textContent=r;$(o).forEach(([f,m])=>{t.setAttribute(f,m)}),t.onload=()=>n(t),t.onerror=()=>i(new Error("Failed to load Script")),document.head.appendChild(t),requestAnimationFrame(()=>n("Script executed"))})},_n=()=>{let n=document.querySelector("#d-css")?.sheet;if(n)return n;let i=document.createElement("style");return i.id="d-css",document.head.appendChild(i),i.sheet},Nn=(o,n)=>{for(let i=0;i<o.cssRules.length;i++)if(o.cssRules[i].selectorText===n)return!0;return!1},pn=(o)=>Object.entries(o).map(([n,i])=>`${X(n)}: ${i};`).join(" ");function cn(o,n={}){if(U)return;let i=_n();if(!i)return;if(!Nn(i,o))i.insertRule(`${o} { ${pn(n)} }`,i.cssRules.length)}var xn=(o,n=!1)=>{if(_(o))return[+o,Bo(o)?"int":"float"];if(n&&/\.\w+$/.test(o))return[o,"file"];if(o==="/")return[o,"-"];if(o.length===36&&o.match(/\-/g)?.length===4)return[o,"uuid"];return[o,"string"]},xo=(o)=>{let n=o.startsWith("/")?o:"/"+o,i=n.match(/(?<=\/)[^/].*?(?=\/|$)/g)??["/"],[t,r]=i.reduce(([f,m],u)=>{if(u.includes("<")){let x=u.match(/(?<=<)[^/].*?(?=>|$)/g);if(x?.length){let[h,H]=x[0].split(":");if(h)f.push(h),m.push(H||"_")}}else f.push(u===">"?"/":u);return[f,m]},[[],[]]);if(n.endsWith("/")&&n.length>1)t.push("/");return{parsed:t,args:r}};class go{storage;constructor(){this.storage=new y}cache(o,n){if(this.storage.lacks(o))this.storage.set(o,n());return this.storage.get(o)}}var ln=["int","float","file","uuid","string"];class s{_storage;CC;constructor(){this._storage=new y,this.CC=new go}set(o){let{parsed:n,path:i}=o,t=w(n);if(!this._storage.get(t))this._storage.set(t,o);else throw`path: ${i} already used.`}get(o){let{parsed:n}=this.CC.cache(o,()=>xo(o)),i={},t=this._storage.get(w(n));if(!t&&o!=="/")for(let r of this._storage.keys()){let f=[],m=vo(r);if(n.length===m.length){let u=m.map((H,S)=>{let J=xn(n[S],n.length-1===S);if(H===J[0])return J[0];if(ln.includes(J[1]))return f.push(J[0]),J[1];return H}),x=w(u);if(this._storage.has(x)){t=this._storage.get(x),t?.args.forEach((H,S)=>{i[H]=f[S]});break}}}return[t,i]}keys(){return this._storage.keys()}}class To{path="";parsed=[];args=[];constructor(o){lo(this,{path:o,...xo(o)})}}class Mo{date;constructor(o){this.date=o?new Date(o):new Date}delta(o=null,n=!1){let i=Mo.delta(this.date.getTime(),o);return n?new Date(i):i}timed(o){if(!o)return this.date;return[["year","FullYear"],["month","Month"],["day","Date"],["hour","Hours"],["minute","Minutes"],["second","Seconds"]].reduce((i,[t,r])=>{let f=o[t];return f?new Date(i[`set${r}`](i[`get${r}`]()+f)):i},new Date(this.date))}static delta(o,n=null){return n?n-o:o-Date.now()}static local(o){return new Date(o).toLocaleString()}static get now(){return Date.now()}}class Xo{static rand(o=6,n){if(n)return Math.floor(Math.random()*(n-o+1)+o);return Math.floor(Math.random()*o)+1-1}static fill(o,n=null){return Array(o).fill(n)}static new({dom:o,id:n,inner:i}){let t=document.createElement(o);if(n)t.id=n;if(i)t.innerHTML=i;return t}static randFrom(o){if(Array.isArray(o)){let n=o.length,i=this.rand(0,n-1);return o[i]}else if(typeof o=="object"){let n=K(o),i=n.length,t=this.rand(0,i-1);return n[t]}}static randArray(o=[],n=1,i=!1){let t=[],r=i?new Set:null;while((i?r.size:t.length)<n){let f=o[Xo.rand(0,o.length-1)];i?r.add(f):t.push(f)}return i?[...r]:t}static randomAZ=on;static makeID=E;static class(o,...n){let i=n.filter(Boolean);if(o?.class)i.push(...b(o.class)?o.class:[o.class]);if(i.length)o.class=i}static get O(){return{vals:G,keys:K,items:$,has:nn,ass:T,len:(o={})=>K(o).length}}static get is(){return Zo}static get return(){return gn}static isHREF(o,n){return o===n?!0:o.startsWith(n)&&n!=="/"?!0:!1}static sleep=(o=1000)=>new Promise((n)=>setTimeout(n,o));static get screen(){let{innerWidth:o}=window,n={xs:o<=480,sm:o>=480,smd:o>=624,md:o>=768,lg:o>=1024,xl:o>=1280,xxl:o>=1536},i=$(n).reverse();for(let t=0;t<i.length;t++){let[r,f]=i[t];if(f)return r}return}bytes(o){if(o===0)return"0 Bytes";let n=1024,i=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(o)/Math.log(n));return parseFloat((o/Math.pow(n,t)).toFixed(2))+" "+i[t]}static format(o){return new Tn(o)}static compareObjects=d;static isObjectUdpated=mo}class gn{static arr(o){return o?b(o)?o:[o]:[]}static num(o,n=0){let i=parseFloat(o);return isNaN(i)?n:i}static str(o){return String(o)}static arr2obj(o,n=!1){return o.reduce((i,t,r)=>{if(n)i[t]=r;else i[r]=t;return i},{})}}class Tn{val;constructor(o){this.val=o}get px(){return`${this.val}px`}get rem(){return`${this.val}rem`}get pr(){return`${this.val}%`}}async function C(o,n,{id:i="stateHook",init:t}={}){let r=[],f=()=>n.map((u)=>u.value),m=async()=>{await o(...f())};if(n.forEach((u)=>{r.push(u.hook(m)(i))}),t)await m();return()=>{r.forEach((u)=>u())}}var bn=(o)=>{o.forEach((n)=>n())};var dn=(o,n)=>{for(let[i,t]of o){let r=P(i);if(!r){o.delete(i);continue}t.forEach((f)=>{f.call(r,n)})}};class q extends EventTarget{options;deep;verify;hooks=new y;states=new y;_value;listening=!1;end;constructor(o,n={},i=!0,t=!0){super();this.options=n;this.deep=i;this.verify=t;this._value=o}get value(){return this._value}set value(o){if(!this.verify){this._value=o,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(!this.deep){if(this._value===o)return;this._value=o,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}));return}if(j(this._value)||b(this._value)){let n=d(this._value,o);if(!mo(n))return}else if(this._value instanceof Set){if(!tn(this._value,o))return}else if(this._value===o)return;this._value=o,this.dispatchEvent(new CustomEvent("updated",{detail:this._value}))}get listen(){let o=(n)=>{if(bn(this.hooks),dn(this.states,n.detail),!this.states.size&&!this.hooks.size)this.end?.()};if(!this.listening)this.addEventListener("updated",o,this.options),this.listening=!0;return()=>{this.listening&&this.removeEventListener("updated",o,this.options),this.end=void 0,this.listening=!1}}call(o,n){return(i)=>{if(uo(i,this.states).set(n,o),!U&&!this.listening)this.end=this.listen;return()=>{if(this.states.has(i))this.states.get(i)?.delete(n)}}}hook(o){return(n)=>{if(this.hooks.set(n,o),!U&&!this.listening)this.end=this.listen;return()=>{if(this.hooks.has(n))this.hooks.delete(n)}}}}function M(o,n={}){return new q(o,n,!0)}function an(o,n=!1){return new q(o,{},!1,n)}class qo{e;opt;constructor(o){this.e=o;this.opt={duration:500,easing:"ease-in-out",fill:"forwards"}}animate(o,n={}){return this.e.animate(o,n)}get slide(){let o=({x:n=0,y:i=0},t={})=>{T(this.opt,t);let r=[[n,i],[0,0]].map(([f,m])=>({transform:`translateX(${f}rem) translateY(${m}rem)`}));return this.e.animate(r,this.opt),this};return{left:(n={})=>{return o({x:-2},n)},right:(n={})=>{return o({x:2},n)},up:(n={})=>{return o({y:2},n)},down:(n={})=>{return o({y:-2},n)}}}fade(o={}){T(this.opt,o);let n=[0,1].map((i)=>({opacity:i}));return this.e.animate(n,this.opt),this}shake(o="Y",n={}){T(this.opt,n);let i=[0,5,-5,5,0].map((t)=>({transform:`translate${o}(${t}px)`}));return this.e.animate(i,this.opt),this}color(o=[],n={}){T(this.opt,n);let i=Array.isArray(o)?o.map((t)=>({color:t})):{color:o};return this.e.animate(i,this.opt),this}bg(o=[],n={}){T(this.opt,n);let i=Array.isArray(o)?o.map((t)=>({backgroundColor:t})):{backgroundColor:o};return this.e.animate(i,this.opt),this}bounce(o=1,n={}){T(this.opt,n);let i=[0.5,o,1].map((t)=>({transform:`scale(${t})`}));return this.e.animate(i),this}}var e=(o)=>{if(b(o))return o.filter((n)=>n!==void 0).join(" ");else if(R(o)){if(j(o))return w(o)}else if(L(o))return e(o());else if(o!==void 0&&o!==null)return N(o)?o?"":"false":String(o);return""};function kn(o,n){switch(n??o){case"style":return function(i){this.style.setProperty(o,i)};default:return function(i){this.setAttribute(o,i)}}}class Jo{attr;constructor(o={}){this.attr=o}get(o,n=this.attr,i){let t=(r,f)=>{if(b(f))o.attr_push(r,e(f),i);else if(f instanceof q){let m=i?`${i}_${r}`:r;o.states.push(f.call(kn(r,i),m)),t(r,f.value)}else if(R(f)){if(j(f)&&!i)this.get(o,f,r)}else o.attr_push(r,e(f),i)};$(n).forEach(([r,f])=>{if(r==="ref"){if(f instanceof v)o.events.obj({element(){f.element=this}})}else if(["on"].includes(r))R(n.on)&&o.events.obj(n.on);else{if(f===void 0)return;t(r,f)}})}unload(o){let n=void 0;if(o in this.attr)n=this.attr[o],delete this.attr[o];return n}}var en=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],vn=(o)=>en.includes(o);function oi(o){return String(o).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var bo=async(o,n)=>{if(o=await Promise.resolve(o),b(o)){let i=[];for(let t of o)i.push(await bo(t,n));return i.join("")}else if(o instanceof V){let{ctx:i,oz:t}=await jo(o,n.IDM);return n.OZ.push(t),i}else if(R(o))return w(o);else if(L(o))return await bo(o(),n);else if(o!==void 0&&o!==null)return oi(o);return""},yo=async(o,n)=>{let i=new A(n),t=new oo(i.id,i);return{ctx:await bo(o,t),catt:t}};async function ni(o){let n=this.id;if(n){let{ctx:i,catt:t}=await yo(o,n);if(this.innerHTML!==i)this.innerHTML=i,F.RPS(t.OZ)}}var Fo=async(o,n,i,t=[])=>{if(b(o))for(let r of o)await Fo(r,o.length,i,t);else if(o instanceof q)if(n>1)await Fo(await Y("div",{},o),n,i,t);else{let r=o.value,f=r instanceof V?"dom":"ctx",{ctx:m,catt:u}=await yo(r,i.xid+"-0");i.xid=u.xid,t.push(m),i.OZ.push(u.OZ),i.states.push(o.call(ni,f))}else t.push(await bo(o,i))};class Qo{tag;ctx;closing;constructor(o="",n){this.tag=o;this.ctx=n;let i=vn(o);this.closing=i?"":`</${o}>`}async process(o,n=this.ctx,i=[]){for(let t of n)await Fo(await Promise.resolve(t),n.length,o,i);return i.join("")}async get(o){let n=await this.process(o);if(!this.tag)return n;if(o.events.size||o.states.length)o.id=o.xid;return`<${this.tag}${o.attr}>${n}${this.closing}`}}class So{e;query;constructor(o,n){this.e=o;this.query=n}get a(){return new qo(this)}get all(){if(this.query){let o=document.querySelectorAll(this.query);if(o.length)return Array.from(o).map((n)=>n)}return[]}get attr(){let o=this.e;return{has:(n)=>{return o.hasAttribute(n)},get:(n)=>{return o.getAttribute(n)},del:(n)=>{return o.removeAttribute(n),this},set:(n)=>{for(let i in n){let t=n[i];if(n[i]!==void 0)o.setAttribute(i,e(t))}return this}}}get children(){return Array.from(this.e.children).map((o)=>D(o))}get click(){return this.e.click(),this}get delete(){return this.e.remove(),this}get disabled(){return this.e.disabled??!1}get focus(){return this.e.focus(),this}get href(){return this.e?.href??""}get id(){return this.e.id}get inner(){return this.e.innerHTML}get offsetParent(){let o=this.e.offsetParent;if(o)return new Q(o);return}get parent(){let o=this.e.parentElement;if(o)return new Q(o);return}get hash(){return this.e?.hash??""}get path(){return this.e?.pathname??""}get rect(){return this.e.getBoundingClientRect()}get remove_element(){return this.e.remove(),this}get style(){let o=this.e.style,n=this;return{set:(i,t=0)=>{let r=o,f=()=>{$(i).forEach(([m,u])=>{if(m in r){if(r[m]!==u)r[m]=u}else if(u!==null)o.setProperty(m,String(u))})};if(L(t))n.on("transitionend",t);if(Uo(t))setTimeout(f,t);else f();return n},get:(i)=>{let t=X(String(i));return o.getPropertyValue(t)},del:(...i)=>{i.forEach((t)=>{let r=X(String(t));o.removeProperty(r)})}}}get submit(){let o=this.e;if("submit"in o)return o.submit();return!1}get tag(){return this.e.tagName.toLowerCase()}get value(){return this.e.value??""}get unload(){return()=>{this.e.remove()}}set append(o){Eo(o,Wo(this.id)).then((n)=>{let{ctx:i,catt:t}=n;this.e.insertAdjacentHTML("beforeend",i),F.RPS(t.OZ)})}set appendfirst(o){Eo(o,Wo(this.id)).then((n)=>{let{ctx:i,catt:t}=n;this.e.insertAdjacentHTML("afterbegin",i),F.RPS(t.OZ)})}set inner(o){Eo(o,Wo(this.id)).then((n)=>{let{ctx:i,catt:t}=n;this.e.innerHTML=i,F.RPS(t.OZ)})}set disabled(o){let n=this.e;if("disabled"in n)n.disabled=o}set id(o){this.e.id=o}set value(o){let n=this.e;n.value=o}}var Eo=(o,n)=>{return yo(o,n)},Wo=(o)=>o?`${o}-0`:o;class Q extends So{constructor(o,n){super(o,n)}add(...o){return this.e.classList.add(...o.map((n)=>n.replace(/[^\w-]/,""))),()=>{this.e.classList.remove(...o.map((n)=>n.replace(/[^\w-]/,"")))}}remove(...o){return this.e.classList.remove(...o.map((n)=>n.replace(/[^\w-]/,""))),this}toggle(o,n){let i=typeof o!="string"?o.apply(this):o;return this.e.classList.toggle(i,n)}hasNode(o){return this.e.contains(o)}has(...o){let n=this.e.classList;return o.every((i)=>n.contains(i))}insert(o){return{HTML:(...n)=>{return n.forEach((i)=>{this.e.insertAdjacentHTML(o,i)}),this},element:(...n)=>{return n.forEach((i)=>{this.e.insertAdjacentElement(o,i)}),this},text:function(...n){return n.forEach((i)=>{this.e.insertAdjacentText(o,i)}),this}}}is(o){let n=this.e.classList,i=this.e.tagName.toLocaleLowerCase(),t=!0,r=!0;if(o.dom)r=o.dom==i?!0:!1;if(o.class)if(Array.isArray(o.class))o.class.forEach((f)=>{t=t?n.contains(f):!1});else t=t?n.contains(o.class):!1;return t&&r}on(o,n,i=!1){let t=!1;if(o.indexOf("touch")>-1)t=!0;return this.e.addEventListener(o,n,{capture:i,passive:t}),this}remove_on(o,n,i=!1){return this.e.removeEventListener(o,n,i),this}timed(o,n=250){return setTimeout(()=>o(this),n),this}animate(o,n,i){let t={duration:300,easing:"ease",fill:"forwards"};if(L(n))i=n;else T(t,n);let r=this.e.animate(o,t);if(i)r.finished.then(i);return this}}var no=new y,P=(o)=>{if(U)return;let n=no.get(o);if(n?.isConnected)return n;no.delete(o);let i=document.getElementById(o);if(!i)return;return no.set(o,i),i};function yn(){let o=[];for(let[n,i]of no)if(!i.isConnected)o.push(n),no.delete(n);return o}function D(o,n){let i=n?n:document;if(p(o)){let t=i.querySelector(o);if(t)return new Q(t,o);return}else if(j(o)){let[[t,r]]=$(o),m=`${t==="id"?"#":"."}${r}`,u=i.querySelector(m);if(u)return new Q(u,m);return}else return new Q(o)}class v{state=new q(void 0);constructor(){}get element(){return this.state.value?.e}set element(o){if(o)this.state.value=new Q(o);else this.state.value=void 0}get $(){return this.state.value}}var ii=()=>{return new v};var ti=(o,n,i)=>{return o.addEventListener(n,i),()=>{o.removeEventListener(n,i)}},io={};class $o{events=new y;states=new y;windowEvents=new y;resetST=new y;resetEV=new y;get keys(){return[...new Set([...this.states.keys(),...this.events.keys()])]}set(o){let{id:n,events:i,states:t}=o;if(n){if(i.size)this.events.set(n,i);if(t.length)this.states.set(n,t)}return this}push(o){return o.events.forEach((n,i)=>{n.forEach((t,r)=>{uo(i,this.events).set(r,t)})}),o.states.forEach((n,i)=>{l(i,this.states).push(...n)}),this}get stage(){return this.events.forEach((o,n)=>{this.events.delete(n);let i=P(n);if(!i){this.events.delete(n);return}o.forEach((t,r)=>{switch(r){case"ready":case"element":t.apply(i,[i]);break;case"resize":case"beforeunload":case"popstate":case"winscroll":case"winload":case"winfocus":case"winblur":let f=r.replace(/^win/,"");this.windowEvents.init(f,new y).set(n,t);break;case"state":let[m,u,x]=t.apply(i,[i]),h=b(u)?u:[u];if(!h.length)break;let H=()=>h.map((J)=>J.value),S=()=>m(...H());if(x)S();h.forEach((J)=>l(n,this.resetST).push(J.call(S,n+"_state")(n)));break;default:l(n,this.resetEV).push(ti(i,r,t))}})}),this.processWindowEvents,this.states.forEach((o,n)=>{this.states.delete(n),o.forEach((i)=>{l(n,this.resetST).push(i(n))})}),this}get processWindowEvents(){let o=(n,i)=>{let t=0,r=!1,f=(u)=>{if(t=window.scrollY,!r)window.requestAnimationFrame(()=>{i.forEach((x,h)=>{let H=P(h);if(H)x.call(H,u);else this.windowEvents.get(n)?.delete(h)}),r=!1}),r=!0},m=(u)=>{i.forEach((x,h)=>{let H=P(h);if(H)x.call(H,u);else this.windowEvents.get(n)?.delete(h)})};return window.addEventListener(n,n==="scroll"?f:m),()=>{window.removeEventListener(n,n==="scroll"?f:m)}};return this.windowEvents.forEach((n,i)=>{if(n.size){if(!io[i])io[i]=o(i,n)}else if(io[i])io[i](),delete io[i]}),this}reset(o){return o.forEach((n)=>{this.windowEvents.forEach((i,t)=>{if(i.has(n))i.delete(n)}),this.resetEV.get(n)?.forEach((i)=>{i()}),this.resetST.get(n)?.forEach((i)=>{i()}),this.resetST.delete(n),this.resetEV.delete(n)}),this}RPS(o){if(o){let n=yn();this.reset(n);let i=o.keys;if(i.length)this.reset(i).push(o).stage}return this}}var F=new $o;class oo{xid;IDM;map=new y;states=[];events=new y;OZ;constructor(o,n=new A,i){this.xid=o;this.IDM=n;this.OZ=i??new $o}attr_push(o,n,i){let t=i??o;if(!this.map.has(t))this.map.set(t,[]);let r=i?`${X(o)}:${n};`:n;this.map.get(t).push(r)}get attr(){let o=[""];return this.map.forEach((n,i)=>{let t=n.join("");o.push(t?`${i}="${t}"`:i)}),o.join(" ")}set id(o){if(!this.map.has("id"))this.map.set("id",[o])}get id(){return this.map.get("id")?.join("")}}async function $n(o,n){return await jo(o,new A(n))}async function jo(o,n=new A){let{tag:i,attr:t,ctx:r}=o,f=n instanceof A?n:new A(n),m=f.mid,u=new oo(m,f),x=new Jo(t),h=new Qo(i,r);return x.get(u),{ctx:await h.get(u),oz:u.OZ.set(u),id:u.id}}class V{tag;attr;ctx;constructor(o,n,i){this.tag=o;this.attr=n;this.ctx=i}}async function Y(o,n={},...i){if(L(o))return await o(n??{},...i);return new V(o,n??{},i)}var ri=async(o,...n)=>new V("",{},n);async function hn(o={},n){let i=D("link[rt]")?.all.map((t)=>()=>t.remove())||[];if(o&&W(o))for(let t of G(o)){if(t.x)continue;try{await Go(t)}catch(r){I.e=["link error",{error:"Huntr @ link"}]}}return i}var fi=["charset","name","property","http-equiv"];async function Hn(o){let n={};if(D("meta")?.all.forEach((i)=>{let t=i.attributes;for(let r of fi)if(r in t){let f=t[r].value;n[`${r}_${r==="charset"?"":f}`]=i}}),o)$(o).forEach(([i,t])=>{if(i in n)D(n[i]).attr.set(t),delete n[i];else{let r=D(document.createElement("meta"));r.attr.set(t),document.head.append(r.e)}});return G(n).map((i)=>D(i).unload)}async function Yn(o,n=!1){let i=D("script[rt]")?.all.map((t)=>()=>t.remove())||[];if(o&&W(o))for(let t of G(o)){if(t.x)continue;try{await mn(t)}catch(r){I.e=["script error",{error:"Huntr @ script"}]}}return i}class to extends wo{path="";data={};args={};importArgs=[];static A=(o,...n)=>{return Y("a",o||{},...n)}}async function Dn(o,n=!1){if(!n&&o.fetch)T(o.data,await o.fetch());return[await Io(await o.body?.(),o.importArgs),ui.call(this,o)]}async function Io(o,n=[]){let i=o||"";if(Lo(o)){let t=o.default,r=L(n)?n():n;i=L(t)?await t.apply({},r):t}return b(i)?i:[i]}function ui(o){let n=new k({push:{rt:this.id}});return n.htmlHead=structuredClone(this.htmlHead),n.head(o),n.htmlHead}async function Ln(o,n){document.title=o.get("title")||"",zo(await hn(o.get("link"),n)),zo(await Yn(o.get("script")));let i=await Hn(o.get("meta"));zo(i)}var zo=(o)=>{o.forEach((n)=>n())};class ho{onChange;popListener;constructor(o=M(""),n=!1,i){if(this.onChange=i,this.onChange?.(this.path(),history.state??{path:this.path()}),this.popListener=(t)=>{let r=t.state??{path:this.path()},f=r?.path;if(n&&f)f=f==="/"?f:f.replace(/\/+$/g,"");o.value=f||o.value,this.onChange?.(this.path(),r)},c)window.addEventListener("popstate",this.popListener)}path(){let{pathname:o,search:n,hash:i}=window.location;return`${o}${n}${i}`}state(){return window.history.state??{path:this.path()}}navigate(o,n,i=""){let t=this.resolve(o),r=this.path();if(this.samePath(r,t))return;let f={...n,path:t};window.history.pushState(f,i,t),this.onChange?.(this.path(),f)}replace(o,n,i=""){let t=this.resolve(o),r=this.path();if(this.samePath(r,t))return;let f={...n,path:t};window.history.replaceState(f,i,t),this.onChange?.(this.path(),f)}back(){window.history.back()}forward(){window.history.forward()}destroy(){if(this.popListener)window.removeEventListener("popstate",this.popListener),this.popListener=void 0}resolve(o){let n=new URL(o,window.location.origin);return`${n.pathname}${n.search}${n.hash}`}samePath(o,n){return o===n}}class Ko{lang;head="";constructor(o,n){if(this.lang=o,n)this.head=un(n)}body(o,n,i){return[`<!DOCTYPE html><html lang="${this.lang}">`,`<head>${this.head}</head>`,`<body id="${n}"${i?" "+i:""}>${o}</body>`,"</html>"].join("")}}class ro{path="";data={};args={};importArgs=[];static Button=(o,...n)=>{return Y("button",o||{},...n)}}class Do extends To{cls;constructor(o,n){super(o);this.cls=n}}class Ho extends Do{}class Un extends Do{}class so{storage=new s;error=new s}class Co extends so{wss=new s;setRoute(o,n){this.storage.set(new Ho(o,n))}getRoute(o,n){let[i,t]=this.storage.get(o);if(!i){let[f=new Ho(o,Bn)]=this.getError(n),m=new f.cls;return m.args=t,T(m,{args:t})}let r=new i.cls;return T(r,{args:t})}setWss(o,n){this.wss.set(new Un(o,n))}getWss(o){return this.wss.get(o)}setError(o,n){this.error.set(new Ho(o.toString(),n))}getError(o=404){return this.error.get(o.toString())}}class Yo extends Do{}class Po extends so{setRoute(o,n){this.storage.set(new Yo(o,n))}getRoute(o,n){let[i,t]=this.storage.get(o);if(!i){let[f=new Yo(o,Zn)]=this.getError(n),m=new f.cls;return m.args=t,T(m,{args:t})}let r=new i.cls;return T(r,{args:t})}setWss(o){}getWss(o){}setError(o,n){this.error.set(new Yo(o.toString(),n))}getError(o=404){return this.error.get(o.toString())}}class Bn extends to{body(){return Y("div",{},this.path+" not found...")}}class Zn extends ro{body(){return Y("div",{},`${this.path} not found...`)}}class Vo extends k{id;data;path;_root;constructor(){super({mark:!0});this.id=E(6),this.path=M("/"),this._root=M([]),this.data={}}A(o,...n){let{on:i,...t}=o,r=this.path,f={...i||{},click(m){m.preventDefault();let u=D(this).path;r.value=u}};return Y("a",{on:f,...t},...n)}_main;async getMain(o){return await Y("main",{...o&&{class:o}},await this._main?.(this._root)||this._root)}}B([Z,g("design:type",Function),g("design:paramtypes",[typeof aAttr==="undefined"?Object:aAttr,Object]),g("design:returntype",void 0)],Vo.prototype,"A",null);class Oo extends Vo{pushHistory;storage=new Co;base;constructor(o="/",n="",i=!1){super();this.pushHistory=i;this.base=o?o.startsWith("/")?o:`/${o}`:"";let t=this.base;this.head({script:[{type:"module",src:"./index.js"}],...{base:[{href:t==="/"?t:`${t}/`,target:"_blank"}]},meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"}]})}route(o){return(n)=>{return n.A=(i,...t)=>{if(i.href&&b(i.href))i.href=_o(o,i.href);else if(!i.href)i.href=o;return this.A(i,...t)},this.storage.setRoute(o,n),n}}error(...o){return(n)=>{if(o.length)o.forEach((i)=>{this.storage.setError(i,n)});return n}}wss(o){return(n)=>{return this.storage.setWss(o,n),n}}}B([Z,g("design:type",Function),g("design:paramtypes",[String]),g("design:returntype",void 0)],Oo.prototype,"route",null),B([Z,g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],Oo.prototype,"error",null),B([Z,g("design:type",Function),g("design:paramtypes",[String]),g("design:returntype",void 0)],Oo.prototype,"wss",null);function _o(o,n){let i=0;return o.replace(/<[^>]+>/g,()=>n[i++])}class An{id=E(5);path=M("");_root=M([]);Button(o,...n){let i=this.path,{on:t,...r}=o,f={...t||{},click(m){m.preventDefault();let x=D(this).attr.get("tab");if(!x)return;i.value=x}};return Y("button",{on:f,...r},...n)}}B([Z,g("design:type",Function),g("design:paramtypes",[Object,Object]),g("design:returntype",void 0)],An.prototype,"Button",null);class No extends An{storage=new Po;hasLoaded=!1;constructor({path:o}={}){super();if(o)this.path=o}tab(o){return(n)=>{return n.Button=(i,...t)=>{if(i.tab&&b(i.tab))i.tab=_o(o,i.tab);else if(!i.tab)i.tab=o;return this.Button(i,...t)},this.storage.setRoute(o,n),n}}Main(o){let{tab:n,data:i={},...t}=o;if(n)this.load(n,i);return Y("main",{...t},this._root)}async load(o,n={}){this.path.value=this.path.value||o,await C(async(i)=>{this._root.value=await mi.call(this,i,n)},[this.path],{id:this.id,init:!0})}}B([Z,g("design:type",Function),g("design:paramtypes",[String]),g("design:returntype",void 0)],No.prototype,"tab",null),B([Z,g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],No.prototype,"Main",null),B([Z,g("design:type",Function),g("design:paramtypes",[String,typeof obj==="undefined"?Object:obj]),g("design:returntype",Promise)],No.prototype,"load",null);async function mi(o,n={},i){let t=this.storage.getRoute(o,i);return T(t,{path:o,data:n}),Io(await t.body?.(),t.importArgs)}class po{path;args;route="/";isConnected=M(!1);data={};constructor(o,n={}){this.path=o;this.args=n;this.data=n}open(o){}message(o){}close(o){}error(o){}get connect(){if(this.ws&&this.ws.readyState<=1)return this;return this.ws=new WebSocket(this.path),this.ws.onopen=async(o)=>{this.isConnected.value=!0,await this.open.call(this,o)},this.ws.onmessage=async(o)=>{await this.message.call(this,o)},this.ws.onclose=async(o)=>{this.isConnected.value=!1,await this.close.call(this,o)},this.ws.onerror=async(o)=>{this.isConnected.value=this.ws.readyState<=1,await this.error.call(this,o)},this}get reconnect(){if(this.state>=2)this.connect;return this}get disconnect(){if(this.state<=1)this.ws.close();return this}get state(){return this.ws?.readyState??3}set send(o){if(this.isConnected.value)this.ws.send(o);else throw new Error(`websocket path ${this.path} not connected`)}}var O=new y;class co{yvee;constructor(o){this.yvee=o}async load(o){if(U)return;if(!O.has(o)){let[i,t]=this.yvee.storage.getWss(o);if(!i)return;let{cls:r,path:f}=i,m=new r(f,t).connect;return O.set(o,m),m}let n=O.get(o);return n.reconnect,n}unload(o){if(U)return;if(O.has(o)){let n=O.get(o);if(!n)return;n.disconnect,O.delete(o)}}}class wn extends Oo{isDev;history;constructor({base:o,history:n,index:i,isDev:t=!1}={}){super(o,i,n);let r=this;this.isDev=t,this.history=new ho(this.path,this.isDev),T(this,{get yvee(){return r}})}Main(o){this._main=o}async render(o={}){let{id:n,data:i,class:t}=o;if(c){let r=window.location.pathname;if(this.isDev)r=r.replace(/\/+$/g,"");this.path.value=r;let f=document.body.id;this.id=f;let[m,u]=await Rn.call(this,this.path.value,t);return F.push(u.oz),requestAnimationFrame(()=>{F.stage,this.init(i)}),()=>{}}return async({path:r,data:f={},error:m=0})=>{if(n)this.id=n;this.path.value=r;let[u,x]=await Rn.call(this,this.path.value,t,m,f,!0);return new Ko(this.lang,u).body(x.ctx,this.id)}}async init(o={}){let n=this.id;C(async(i)=>{let[t,r]=await Gn.call(this,i,o);await Ln(r,n),this._root.value=t,this.pushHistory&&this.history.navigate(i)},[this.path],{id:n})}}B([Z,g("design:type",Function),g("design:paramtypes",[Function]),g("design:returntype",void 0)],wn.prototype,"Main",null),B([Z,g("design:type",Function),g("design:paramtypes",[typeof renderConfig==="undefined"?Object:renderConfig]),g("design:returntype",Promise)],wn.prototype,"render",null);async function Gn(o,n={},i=!1,t){let r=this.storage.getRoute(o,t);return T(r,{path:o,data:n}),await Dn.call(this,r,i)}async function Rn(o,n,i,t={},r=!1){let[f,m]=await Gn.call(this,o,t,r,i);this._root.value=f;let u=await this.getMain(n),x=await $n(await this.getMain(n),this.id);return[m,x]}var xi=(o)=>{return(n)=>{return o(n)}};export{po as websocket,ii as useRef,co as socket,I as log,ri as frag,Y as dom,to as doc,Go as cssLoader,ro as content,cn as addCSS,Xo as __,wn as Yvee,Mo as Time,No as Tabs,q as Stateful,C as StateHook,M as State,xi as Routes,v as Ref,an as QState,ho as PathHistory,a as Meta,zn as IfClient,D as $};
